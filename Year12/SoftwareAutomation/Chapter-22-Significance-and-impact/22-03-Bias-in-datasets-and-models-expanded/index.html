
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Comprehensive educational resource for NSW HSC Software Engineering syllabus">
      
      
      
        <link rel="canonical" href="https://eatham532.github.io/Software-Engineering-HSC-Textbook/Year12/SoftwareAutomation/Chapter-22-Significance-and-impact/22-03-Bias-in-datasets-and-models-expanded/">
      
      
        <link rel="prev" href="../22-02-Human-behaviour-patterns-and-their-influence-on-ML-AI-development/quiz/">
      
      
        <link rel="next" href="quiz/">
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Section 22.3: Bias in Datasets and Models (Expanded) - Software Engineering Textbook HSC</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/diagram-modal.css">
    
      <link rel="stylesheet" href="../../../../assets/quiz.css">
    
      <link rel="stylesheet" href="../../../../assets/common.css">
    
      <link rel="stylesheet" href="../../../../assets/diagram-fix.css">
    
      <link rel="stylesheet" href="../../../../assets/cross-reference.css">
    
      <link rel="stylesheet" href="../../../../assets/site-banner.css">
    
      <link rel="stylesheet" href="../../../../assets/code-runner.css">
    
      <link rel="stylesheet" href="../../../../assets/code-editor.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-58275RL1P9"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-58275RL1P9",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-58275RL1P9",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#section-223-bias-in-datasets-and-models-expanded" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
  
  
    
    
    
    <div class="site-banner site-banner--warning" data-banner data-banner-version="1" role="status" aria-live="polite">
      <div class="site-banner__inner">
        <span class="site-banner__icon" aria-hidden="true">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            
              <path d="M12 9v4"/><path d="M12 17h.01"/><path d="M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z"/>
            
          </svg>
        </span>
        <p class="site-banner__text">
          This textbook is in <strong>beta</strong> â€“ content is actively being refined.
          
            <a class="site-banner__link" href="https://github.com/Eatham532/Software-Engineering-HSC-Textbook/issues/new/choose" target="_blank" rel="noopener">Report issues or suggestions</a>
          
        </p>
        <button type="button" class="site-banner__close" aria-label="Dismiss banner" title="Dismiss" data-banner-dismiss>&times;</button>
      </div>
    </div>
    <script>
      (function(){
        var banner=document.querySelector('[data-banner]');
        if(!banner) return;
        var version=banner.getAttribute('data-banner-version')||'1';
        var KEY='site_banner_dismissed_v'+version;
        try{ if(localStorage.getItem(KEY)){ banner.remove(); return;} }catch(e){}
        var btn=banner.querySelector('[data-banner-dismiss]');
        if(btn){ btn.addEventListener('click',function(){
          banner.classList.add('is-hiding');
          setTimeout(function(){ banner && banner.remove(); },200);
          try{ localStorage.setItem(KEY,'1'); }catch(e){}
        }); }
      })();
    </script>
  
  
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Software Engineering Textbook HSC" class="md-header__button md-logo" aria-label="Software Engineering Textbook HSC" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Software Engineering Textbook HSC
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Section 22.3: Bias in Datasets and Models (Expanded)
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Eatham532/Software-Engineering-HSC-Textbook/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Eatham532/Software-Engineering-HSC-Textbook
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    

    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../Year11/ProgrammingFundamentals/" class="md-tabs__link">
          
  
  
  Year 11

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../ProgrammingForTheWeb/" class="md-tabs__link">
          
  
  
  Year 12

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../code-editor/" class="md-tabs__link">
        
  
  
    
  
  Code Editor

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Software Engineering Textbook HSC" class="md-nav__button md-logo" aria-label="Software Engineering Textbook HSC" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Software Engineering Textbook HSC
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Eatham532/Software-Engineering-HSC-Textbook/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Eatham532/Software-Engineering-HSC-Textbook
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    
  
  
  
    <a href="../../../../Year11/ProgrammingFundamentals/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Year 11
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Year 12
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Year 12
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../ProgrammingForTheWeb/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Programming For The Web
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../SecureSoftwareArchitecture/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Secure Software Architecture
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Software Automation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Software Automation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    
  
  
  
    <a href="../../Chapter-20-ML-and-automation-basics/20-01-What-is-AI-vs-ML/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 20 â€” ML and automation basics
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    
  
  
  
    <a href="../../Chapter-21-Programming-for-automation/21-01-Regression-models-and-core-algorithm-types-in-Python/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 21 â€” Programming for automation
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3_4" checked>
        
          
          <label class="md-nav__link" for="__nav_3_3_4" id="__nav_3_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Chapter 22 â€” Significance and impact
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_3_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_3_4">
            <span class="md-nav__icon md-icon"></span>
            Chapter 22 â€” Significance and impact
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../22-01-Assessing-the-impact-of-automation/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    22.1 Assessing the impact of automation
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../22-02-Human-behaviour-patterns-and-their-influence-on-ML-AI-development/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    22.2 Human behaviour patterns and their influence on ML/AI development
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3_4_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3_3_4_3" id="__nav_3_3_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    22.3 Bias in datasets and models (expanded)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_3_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_3_4_3">
            <span class="md-nav__icon md-icon"></span>
            22.3 Bias in datasets and models (expanded)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Content
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Content
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-1-sources-of-bias-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Part 1: Sources of Bias Analysis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Part 1: Sources of Bias Analysis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-understanding-bias-types" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 Understanding Bias Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-bias-detection-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 Bias Detection Workflow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-2-practical-bias-investigation-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Part 2: Practical Bias Investigation Tools
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-3-bias-mitigation-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      Part 3: Bias Mitigation Strategies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-4-transparency-and-accountability-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Part 4: Transparency and Accountability Tools
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practice-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Practice Tasks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Practice Tasks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#task-1-bias-source-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Task 1: Bias Source Analysis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-2-missing-groups-investigation" class="md-nav__link">
    <span class="md-ellipsis">
      Task 2: Missing Groups Investigation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-3-fairness-aware-model-development" class="md-nav__link">
    <span class="md-ellipsis">
      Task 3: Fairness-Aware Model Development
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-4-model-card-creation" class="md-nav__link">
    <span class="md-ellipsis">
      Task 4: Model Card Creation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-5-reproducibility-package" class="md-nav__link">
    <span class="md-ellipsis">
      Task 5: Reproducibility Package
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-takeaways" class="md-nav__link">
    <span class="md-ellipsis">
      Key Takeaways
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="quiz/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quiz
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../SoftwareEngineeringProject/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Software Engineering Project
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../code-editor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code Editor
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-1-sources-of-bias-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Part 1: Sources of Bias Analysis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Part 1: Sources of Bias Analysis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-understanding-bias-types" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 Understanding Bias Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-bias-detection-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 Bias Detection Workflow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-2-practical-bias-investigation-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Part 2: Practical Bias Investigation Tools
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-3-bias-mitigation-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      Part 3: Bias Mitigation Strategies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-4-transparency-and-accountability-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Part 4: Transparency and Accountability Tools
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practice-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Practice Tasks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Practice Tasks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#task-1-bias-source-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Task 1: Bias Source Analysis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-2-missing-groups-investigation" class="md-nav__link">
    <span class="md-ellipsis">
      Task 2: Missing Groups Investigation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-3-fairness-aware-model-development" class="md-nav__link">
    <span class="md-ellipsis">
      Task 3: Fairness-Aware Model Development
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-4-model-card-creation" class="md-nav__link">
    <span class="md-ellipsis">
      Task 4: Model Card Creation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-5-reproducibility-package" class="md-nav__link">
    <span class="md-ellipsis">
      Task 5: Reproducibility Package
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-takeaways" class="md-nav__link">
    <span class="md-ellipsis">
      Key Takeaways
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/Eatham532/Software-Engineering-HSC-Textbook/edit/main/docs/Year12/SoftwareAutomation/Chapter-22-Significance-and-impact/22-03-Bias-in-datasets-and-models-expanded/index.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/Eatham532/Software-Engineering-HSC-Textbook/raw/main/docs/Year12/SoftwareAutomation/Chapter-22-Significance-and-impact/22-03-Bias-in-datasets-and-models-expanded/index.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="section-223-bias-in-datasets-and-models-expanded">Section 22.3: Bias in Datasets and Models (Expanded)<a class="headerlink" href="#section-223-bias-in-datasets-and-models-expanded" title="Permanent link">&para;</a></h1>
<p><strong>Learning Outcome</strong>: SE-12-05 - Investigate the effect of human and dataset source bias in the development of ML and AI solutions</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>Bias in machine learning systems represents one of the most critical challenges in AI development. This section provides comprehensive frameworks for identifying, analyzing, and mitigating various forms of bias that can infiltrate ML systems through data collection, model design, and deployment decisions. Understanding bias is essential for creating fair, reliable, and trustworthy AI systems.</p>
<h2 id="part-1-sources-of-bias-analysis">Part 1: Sources of Bias Analysis<a class="headerlink" href="#part-1-sources-of-bias-analysis" title="Permanent link">&para;</a></h2>
<h3 id="11-understanding-bias-types">1.1 Understanding Bias Types<a class="headerlink" href="#11-understanding-bias-types" title="Permanent link">&para;</a></h3>
<p>Bias in ML systems manifests through multiple pathways, each requiring specific identification and mitigation strategies.</p>
<div class="highlight python-template" data-fence-type="template" data-language="python">
<pre><code class="language-python"><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Any</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">Counter</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.model_selection</span><span class="w"> </span><span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.linear_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">confusion_matrix</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>

<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">BiasAssessment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Assessment result for a specific type of bias&quot;&quot;&quot;</span>
    <span class="n">bias_type</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">severity_score</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># 0.0 to 1.0</span>
    <span class="n">affected_groups</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">impact_description</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">mitigation_suggestions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BiasSourceAnalyzer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Comprehensive framework for analyzing various sources of bias in ML systems&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bias_types</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;sampling&#39;</span><span class="p">:</span> <span class="s1">&#39;Systematic exclusion or over-representation of certain groups&#39;</span><span class="p">,</span>
            <span class="s1">&#39;historical&#39;</span><span class="p">:</span> <span class="s1">&#39;Past societal inequities embedded in training data&#39;</span><span class="p">,</span>
            <span class="s1">&#39;labeler&#39;</span><span class="p">:</span> <span class="s1">&#39;Human annotator biases affecting ground truth labels&#39;</span><span class="p">,</span>
            <span class="s1">&#39;population_drift&#39;</span><span class="p">:</span> <span class="s1">&#39;Changes in population characteristics over time&#39;</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assessments</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">analyze_sampling_bias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">protected_attr</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
                            <span class="n">expected_distribution</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">BiasAssessment</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Analyze sampling bias by comparing actual vs expected group distributions</span>

<span class="sd">        Args:</span>
<span class="sd">            dataset: The dataset to analyze</span>
<span class="sd">            protected_attr: Column name for protected attribute (e.g., &#39;gender&#39;, &#39;race&#39;)</span>
<span class="sd">            expected_distribution: Expected proportions for each group</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actual_distribution</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="n">protected_attr</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

        <span class="c1"># Calculate divergence from expected distribution</span>
        <span class="n">divergences</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">expected_prop</span> <span class="ow">in</span> <span class="n">expected_distribution</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">actual_prop</span> <span class="o">=</span> <span class="n">actual_distribution</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="n">divergences</span><span class="p">[</span><span class="n">group</span><span class="p">]</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">actual_prop</span> <span class="o">-</span> <span class="n">expected_prop</span><span class="p">)</span>

        <span class="n">severity</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">divergences</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="n">affected_groups</span> <span class="o">=</span> <span class="p">[</span><span class="n">group</span> <span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">div</span> <span class="ow">in</span> <span class="n">divergences</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">div</span> <span class="o">&gt;</span> <span class="mf">0.05</span><span class="p">]</span>

        <span class="n">impact_desc</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Sampling bias detected with max divergence of </span><span class="si">{</span><span class="n">severity</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">affected_groups</span><span class="p">:</span>
            <span class="n">impact_desc</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; affecting groups: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">affected_groups</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">mitigation</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;Implement stratified sampling to match expected distribution&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Use weighted sampling during training&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Collect additional data for underrepresented groups&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Apply data augmentation techniques for minority groups&quot;</span>
        <span class="p">]</span>

        <span class="n">assessment</span> <span class="o">=</span> <span class="n">BiasAssessment</span><span class="p">(</span>
            <span class="n">bias_type</span><span class="o">=</span><span class="s2">&quot;sampling&quot;</span><span class="p">,</span>
            <span class="n">severity_score</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="n">severity</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>  <span class="c1"># Scale to 0-1</span>
            <span class="n">affected_groups</span><span class="o">=</span><span class="n">affected_groups</span><span class="p">,</span>
            <span class="n">impact_description</span><span class="o">=</span><span class="n">impact_desc</span><span class="p">,</span>
            <span class="n">mitigation_suggestions</span><span class="o">=</span><span class="n">mitigation</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assessments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">assessment</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">assessment</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">analyze_historical_bias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">protected_attr</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
                               <span class="n">outcome_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BiasAssessment</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Analyze historical bias through disparate impact analysis</span>

<span class="sd">        Args:</span>
<span class="sd">            dataset: The dataset to analyze</span>
<span class="sd">            protected_attr: Protected attribute column</span>
<span class="sd">            outcome_col: Target outcome column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Calculate positive outcome rates by group</span>
        <span class="n">group_outcomes</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">protected_attr</span><span class="p">)[</span><span class="n">outcome_col</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">])</span>

        <span class="c1"># Find reference group (typically majority group)</span>
        <span class="n">reference_group</span> <span class="o">=</span> <span class="n">group_outcomes</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
        <span class="n">reference_rate</span> <span class="o">=</span> <span class="n">group_outcomes</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">reference_group</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">]</span>

        <span class="c1"># Calculate disparate impact ratios</span>
        <span class="n">disparate_impacts</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">group_outcomes</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            <span class="n">group_rate</span> <span class="o">=</span> <span class="n">group_outcomes</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">group</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">reference_rate</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">disparate_impacts</span><span class="p">[</span><span class="n">group</span><span class="p">]</span> <span class="o">=</span> <span class="n">group_rate</span> <span class="o">/</span> <span class="n">reference_rate</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">disparate_impacts</span><span class="p">[</span><span class="n">group</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>

        <span class="c1"># Identify groups with significant disparate impact (&lt; 0.8 or &gt; 1.25)</span>
        <span class="n">affected_groups</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">group</span> <span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="n">disparate_impacts</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ratio</span> <span class="o">&lt;</span> <span class="mf">0.8</span> <span class="ow">or</span> <span class="n">ratio</span> <span class="o">&gt;</span> <span class="mf">1.25</span>
        <span class="p">]</span>

        <span class="n">max_disparity</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">ratio</span><span class="p">)</span> <span class="k">for</span> <span class="n">ratio</span> <span class="ow">in</span> <span class="n">disparate_impacts</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="n">severity</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">max_disparity</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

        <span class="n">impact_desc</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Historical bias analysis reveals disparate impact ratios: </span><span class="si">{</span><span class="n">disparate_impacts</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">mitigation</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;Collect contemporary data to reduce historical bias&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Apply bias-aware preprocessing techniques&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Use fairness constraints during model training&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Implement post-processing calibration&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Consider synthetic data generation for balanced representation&quot;</span>
        <span class="p">]</span>

        <span class="n">assessment</span> <span class="o">=</span> <span class="n">BiasAssessment</span><span class="p">(</span>
            <span class="n">bias_type</span><span class="o">=</span><span class="s2">&quot;historical&quot;</span><span class="p">,</span>
            <span class="n">severity_score</span><span class="o">=</span><span class="n">severity</span><span class="p">,</span>
            <span class="n">affected_groups</span><span class="o">=</span><span class="n">affected_groups</span><span class="p">,</span>
            <span class="n">impact_description</span><span class="o">=</span><span class="n">impact_desc</span><span class="p">,</span>
            <span class="n">mitigation_suggestions</span><span class="o">=</span><span class="n">mitigation</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assessments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">assessment</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">assessment</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">analyze_labeler_bias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">labels_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">text_data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BiasAssessment</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Analyze potential labeler bias through inter-annotator agreement and pattern analysis</span>

<span class="sd">        Args:</span>
<span class="sd">            labels_df: DataFrame with columns for different annotators&#39; labels</span>
<span class="sd">            text_data: Optional text data for content-based bias analysis</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">annotators</span> <span class="o">=</span> <span class="n">labels_df</span><span class="o">.</span><span class="n">columns</span>
        <span class="n">n_annotators</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">annotators</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">n_annotators</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Need at least 2 annotators to assess labeler bias&quot;</span><span class="p">)</span>

        <span class="c1"># Calculate inter-annotator agreement</span>
        <span class="n">agreements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">disagreement_patterns</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">labels_df</span><span class="p">)):</span>
            <span class="n">row_labels</span> <span class="o">=</span> <span class="n">labels_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
            <span class="n">unique_labels</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">row_labels</span><span class="p">))</span>
            <span class="n">agreement_rate</span> <span class="o">=</span> <span class="p">(</span><span class="n">row_labels</span> <span class="o">==</span> <span class="n">row_labels</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">row_labels</span><span class="p">)</span>
            <span class="n">agreements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">agreement_rate</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">unique_labels</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># Track disagreement patterns</span>
                <span class="n">pattern</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">row_labels</span><span class="p">))</span>
                <span class="n">disagreement_patterns</span><span class="p">[</span><span class="n">pattern</span><span class="p">]</span> <span class="o">=</span> <span class="n">disagreement_patterns</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="n">avg_agreement</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">agreements</span><span class="p">)</span>
        <span class="n">severity</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">avg_agreement</span>  <span class="c1"># Higher disagreement = higher bias risk</span>

        <span class="c1"># Identify potential systematic biases</span>
        <span class="n">affected_groups</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">text_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Analyze if disagreements correlate with text characteristics</span>
            <span class="c1"># This is a simplified example - real implementation would be more sophisticated</span>
            <span class="n">high_disagreement_indices</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">agree</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">agreements</span><span class="p">)</span> <span class="k">if</span> <span class="n">agree</span> <span class="o">&lt;</span> <span class="mf">0.7</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">high_disagreement_indices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">agreements</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">:</span>
                <span class="n">affected_groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;high_disagreement_content&quot;</span><span class="p">)</span>

        <span class="n">impact_desc</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Labeler bias analysis: </span><span class="si">{</span><span class="n">avg_agreement</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> average agreement, &quot;</span>
        <span class="n">impact_desc</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">disagreement_patterns</span><span class="p">)</span><span class="si">}</span><span class="s2"> disagreement patterns detected&quot;</span>

        <span class="n">mitigation</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;Provide comprehensive annotation guidelines&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Implement regular inter-annotator agreement checks&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Use multiple annotators with majority voting&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Apply bias-aware label aggregation methods&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Provide annotator training on potential biases&quot;</span>
        <span class="p">]</span>

        <span class="n">assessment</span> <span class="o">=</span> <span class="n">BiasAssessment</span><span class="p">(</span>
            <span class="n">bias_type</span><span class="o">=</span><span class="s2">&quot;labeler&quot;</span><span class="p">,</span>
            <span class="n">severity_score</span><span class="o">=</span><span class="n">severity</span><span class="p">,</span>
            <span class="n">affected_groups</span><span class="o">=</span><span class="n">affected_groups</span><span class="p">,</span>
            <span class="n">impact_description</span><span class="o">=</span><span class="n">impact_desc</span><span class="p">,</span>
            <span class="n">mitigation_suggestions</span><span class="o">=</span><span class="n">mitigation</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assessments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">assessment</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">assessment</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">analyze_population_drift</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">train_data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">test_data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
                               <span class="n">demographic_cols</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">BiasAssessment</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Analyze population drift between training and deployment populations</span>

<span class="sd">        Args:</span>
<span class="sd">            train_data: Training dataset</span>
<span class="sd">            test_data: Test/deployment dataset</span>
<span class="sd">            demographic_cols: List of demographic columns to analyze</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">drift_scores</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">affected_groups</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">demographic_cols</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">train_data</span><span class="o">.</span><span class="n">columns</span> <span class="ow">and</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">test_data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="c1"># Calculate distribution differences</span>
                <span class="n">train_dist</span> <span class="o">=</span> <span class="n">train_data</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">test_dist</span> <span class="o">=</span> <span class="n">test_data</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

                <span class="c1"># Align distributions for comparison</span>
                <span class="n">all_categories</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">train_dist</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">test_dist</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
                <span class="n">train_aligned</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">all_categories</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">test_aligned</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">all_categories</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">cat</span> <span class="ow">in</span> <span class="n">all_categories</span><span class="p">:</span>
                    <span class="n">train_aligned</span><span class="p">[</span><span class="n">cat</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_dist</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="n">test_aligned</span><span class="p">[</span><span class="n">cat</span><span class="p">]</span> <span class="o">=</span> <span class="n">test_dist</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

                <span class="c1"># Calculate KL divergence or similar metric</span>
                <span class="n">drift_score</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">train_aligned</span> <span class="o">-</span> <span class="n">test_aligned</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span>  <span class="c1"># Total variation distance</span>
                <span class="n">drift_scores</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">drift_score</span>

                <span class="k">if</span> <span class="n">drift_score</span> <span class="o">&gt;</span> <span class="mf">0.1</span><span class="p">:</span>  <span class="c1"># Threshold for significant drift</span>
                    <span class="n">affected_groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>

        <span class="n">max_drift</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">drift_scores</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="k">if</span> <span class="n">drift_scores</span> <span class="k">else</span> <span class="mf">0.0</span>
        <span class="n">severity</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">max_drift</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

        <span class="n">impact_desc</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Population drift detected with scores: </span><span class="si">{</span><span class="n">drift_scores</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">mitigation</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;Implement continuous monitoring of population characteristics&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Regular model retraining with current data&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Use domain adaptation techniques&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Apply online learning methods&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Implement drift detection alerts&quot;</span>
        <span class="p">]</span>

        <span class="n">assessment</span> <span class="o">=</span> <span class="n">BiasAssessment</span><span class="p">(</span>
            <span class="n">bias_type</span><span class="o">=</span><span class="s2">&quot;population_drift&quot;</span><span class="p">,</span>
            <span class="n">severity_score</span><span class="o">=</span><span class="n">severity</span><span class="p">,</span>
            <span class="n">affected_groups</span><span class="o">=</span><span class="n">affected_groups</span><span class="p">,</span>
            <span class="n">impact_description</span><span class="o">=</span><span class="n">impact_desc</span><span class="p">,</span>
            <span class="n">mitigation_suggestions</span><span class="o">=</span><span class="n">mitigation</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assessments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">assessment</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">assessment</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate_bias_report</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate comprehensive bias assessment report&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessments</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;No bias assessments performed&quot;</span><span class="p">}</span>

        <span class="n">report</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;total_assessments&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assessments</span><span class="p">),</span>
            <span class="s2">&quot;bias_types_analyzed&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">bias_type</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessments</span><span class="p">],</span>
            <span class="s2">&quot;overall_severity&quot;</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">severity_score</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessments</span><span class="p">),</span>
            <span class="s2">&quot;critical_biases&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessments</span> <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">severity_score</span> <span class="o">&gt;</span> <span class="mf">0.7</span><span class="p">],</span>
            <span class="s2">&quot;all_affected_groups&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span>
                <span class="n">group</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessments</span> <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">affected_groups</span>
            <span class="p">)),</span>
            <span class="s2">&quot;comprehensive_mitigations&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span>
                <span class="n">suggestion</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessments</span> <span class="k">for</span> <span class="n">suggestion</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">mitigation_suggestions</span>
            <span class="p">)),</span>
            <span class="s2">&quot;detailed_assessments&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessments</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">report</span>

<span class="c1"># Demonstration function</span>
<span class="k">def</span><span class="w"> </span><span class="nf">demonstrate_bias_analysis</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Demonstrate bias source analysis with synthetic data&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Bias Source Analysis Demonstration ===</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Create synthetic biased dataset</span>
    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
    <span class="n">n_samples</span> <span class="o">=</span> <span class="mi">1000</span>

    <span class="c1"># Simulate sampling bias (gender imbalance)</span>
    <span class="n">gender</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">],</span> <span class="n">n_samples</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">])</span>  <span class="c1"># 80% male, 20% female</span>

    <span class="c1"># Simulate historical bias (salary gaps)</span>
    <span class="n">base_salary</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">50000</span><span class="p">,</span> <span class="mi">15000</span><span class="p">,</span> <span class="n">n_samples</span><span class="p">)</span>
    <span class="c1"># Historical bias: lower salaries for females</span>
    <span class="n">salary</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">gender</span> <span class="o">==</span> <span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="n">base_salary</span> <span class="o">*</span> <span class="mf">0.85</span><span class="p">,</span> <span class="n">base_salary</span><span class="p">)</span>

    <span class="c1"># Create dataset</span>
    <span class="n">dataset</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
        <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="n">gender</span><span class="p">,</span>
        <span class="s1">&#39;salary&#39;</span><span class="p">:</span> <span class="n">salary</span><span class="p">,</span>
        <span class="s1">&#39;promotion&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">binomial</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">gender</span> <span class="o">==</span> <span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span> <span class="n">n_samples</span><span class="p">)</span>
    <span class="p">})</span>

    <span class="n">analyzer</span> <span class="o">=</span> <span class="n">BiasSourceAnalyzer</span><span class="p">()</span>

    <span class="c1"># Analyze sampling bias</span>
    <span class="n">expected_gender_dist</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;M&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">}</span>  <span class="c1"># Expected 50-50 split</span>
    <span class="n">sampling_assessment</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">analyze_sampling_bias</span><span class="p">(</span>
        <span class="n">dataset</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="n">expected_gender_dist</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sampling Bias Assessment:&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Severity: </span><span class="si">{</span><span class="n">sampling_assessment</span><span class="o">.</span><span class="n">severity_score</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Impact: </span><span class="si">{</span><span class="n">sampling_assessment</span><span class="o">.</span><span class="n">impact_description</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>

    <span class="c1"># Analyze historical bias</span>
    <span class="n">historical_assessment</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">analyze_historical_bias</span><span class="p">(</span>
        <span class="n">dataset</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;promotion&#39;</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Historical Bias Assessment:&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Severity: </span><span class="si">{</span><span class="n">historical_assessment</span><span class="o">.</span><span class="n">severity_score</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Impact: </span><span class="si">{</span><span class="n">historical_assessment</span><span class="o">.</span><span class="n">impact_description</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>

    <span class="c1"># Generate comprehensive report</span>
    <span class="n">report</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">generate_bias_report</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Overall Bias Report:&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Total assessments: </span><span class="si">{</span><span class="n">report</span><span class="p">[</span><span class="s1">&#39;total_assessments&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Overall severity: </span><span class="si">{</span><span class="n">report</span><span class="p">[</span><span class="s1">&#39;overall_severity&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Critical biases: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">report</span><span class="p">[</span><span class="s1">&#39;critical_biases&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Affected groups: </span><span class="si">{</span><span class="n">report</span><span class="p">[</span><span class="s1">&#39;all_affected_groups&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">demonstrate_bias_analysis</span><span class="p">()</span>
</code></pre>
</div>
<h3 id="12-bias-detection-workflow">1.2 Bias Detection Workflow<a class="headerlink" href="#12-bias-detection-workflow" title="Permanent link">&para;</a></h3>
<div class="highlight python-template" data-fence-type="template" data-language="python">
<pre><code class="language-python"><span class="k">def</span><span class="w"> </span><span class="nf">create_bias_detection_pipeline</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a systematic pipeline for bias detection in ML workflows&quot;&quot;&quot;</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">BiasDetectionPipeline</span><span class="p">:</span>
        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">detection_stages</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;data_collection_review&quot;</span><span class="p">,</span>
                <span class="s2">&quot;dataset_composition_analysis&quot;</span><span class="p">,</span> 
                <span class="s2">&quot;labeling_process_audit&quot;</span><span class="p">,</span>
                <span class="s2">&quot;model_performance_evaluation&quot;</span><span class="p">,</span>
                <span class="s2">&quot;deployment_monitoring&quot;</span>
            <span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bias_checkpoints</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">stage_1_data_collection_review</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">collection_metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Review data collection methodology for potential bias sources&quot;&quot;&quot;</span>
            <span class="n">review_results</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;collection_method&quot;</span><span class="p">:</span> <span class="n">collection_metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;method&quot;</span><span class="p">,</span> <span class="s2">&quot;unknown&quot;</span><span class="p">),</span>
                <span class="s2">&quot;sampling_strategy&quot;</span><span class="p">:</span> <span class="n">collection_metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sampling&quot;</span><span class="p">,</span> <span class="s2">&quot;unknown&quot;</span><span class="p">),</span>
                <span class="s2">&quot;time_period&quot;</span><span class="p">:</span> <span class="n">collection_metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;timeframe&quot;</span><span class="p">,</span> <span class="s2">&quot;unknown&quot;</span><span class="p">),</span>
                <span class="s2">&quot;geographic_coverage&quot;</span><span class="p">:</span> <span class="n">collection_metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;geography&quot;</span><span class="p">,</span> <span class="s2">&quot;unknown&quot;</span><span class="p">),</span>
                <span class="s2">&quot;potential_biases&quot;</span><span class="p">:</span> <span class="p">[]</span>
            <span class="p">}</span>

            <span class="c1"># Check for common collection biases</span>
            <span class="k">if</span> <span class="n">review_results</span><span class="p">[</span><span class="s2">&quot;sampling_strategy&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;convenience&quot;</span><span class="p">:</span>
                <span class="n">review_results</span><span class="p">[</span><span class="s2">&quot;potential_biases&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;convenience_sampling_bias&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">review_results</span><span class="p">[</span><span class="s2">&quot;geographic_coverage&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;limited&quot;</span><span class="p">:</span>
                <span class="n">review_results</span><span class="p">[</span><span class="s2">&quot;potential_biases&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;geographic_bias&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">review_results</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">stage_2_dataset_composition_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> 
                                               <span class="n">protected_attributes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Analyze dataset composition for representational biases&quot;&quot;&quot;</span>
            <span class="n">composition_analysis</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;total_samples&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">dataset</span><span class="p">),</span>
                <span class="s2">&quot;attribute_distributions&quot;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s2">&quot;missing_data_patterns&quot;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s2">&quot;correlation_analysis&quot;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">}</span>

            <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">protected_attributes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                    <span class="c1"># Distribution analysis</span>
                    <span class="n">dist</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="n">composition_analysis</span><span class="p">[</span><span class="s2">&quot;attribute_distributions&quot;</span><span class="p">][</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="n">dist</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

                    <span class="c1"># Missing data analysis</span>
                    <span class="n">missing_rate</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
                    <span class="n">composition_analysis</span><span class="p">[</span><span class="s2">&quot;missing_data_patterns&quot;</span><span class="p">][</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="n">missing_rate</span>

            <span class="k">return</span> <span class="n">composition_analysis</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">run_full_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> 
                            <span class="n">protected_attrs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Run complete bias detection pipeline&quot;&quot;&quot;</span>
            <span class="n">pipeline_results</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="c1"># Stage 1: Data collection review</span>
            <span class="n">pipeline_results</span><span class="p">[</span><span class="s2">&quot;collection_review&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stage_1_data_collection_review</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span>

            <span class="c1"># Stage 2: Dataset composition analysis  </span>
            <span class="n">pipeline_results</span><span class="p">[</span><span class="s2">&quot;composition_analysis&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stage_2_dataset_composition_analysis</span><span class="p">(</span>
                <span class="n">dataset</span><span class="p">,</span> <span class="n">protected_attrs</span>
            <span class="p">)</span>

            <span class="c1"># Aggregate findings</span>
            <span class="n">all_biases</span> <span class="o">=</span> <span class="n">pipeline_results</span><span class="p">[</span><span class="s2">&quot;collection_review&quot;</span><span class="p">][</span><span class="s2">&quot;potential_biases&quot;</span><span class="p">]</span>

            <span class="n">pipeline_results</span><span class="p">[</span><span class="s2">&quot;summary&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;total_bias_indicators&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_biases</span><span class="p">),</span>
                <span class="s2">&quot;bias_types_found&quot;</span><span class="p">:</span> <span class="n">all_biases</span><span class="p">,</span>
                <span class="s2">&quot;severity_assessment&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_biases</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="k">else</span> <span class="s2">&quot;moderate&quot;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_biases</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span>
                <span class="s2">&quot;recommendations&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_recommendations</span><span class="p">(</span><span class="n">all_biases</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="n">pipeline_results</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">_generate_recommendations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bias_indicators</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Generate recommendations based on detected bias indicators&quot;&quot;&quot;</span>
            <span class="n">recommendations</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">if</span> <span class="s2">&quot;convenience_sampling_bias&quot;</span> <span class="ow">in</span> <span class="n">bias_indicators</span><span class="p">:</span>
                <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Implement stratified random sampling&quot;</span><span class="p">)</span>
                <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Ensure diverse recruitment channels&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="s2">&quot;geographic_bias&quot;</span> <span class="ow">in</span> <span class="n">bias_indicators</span><span class="p">:</span>
                <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Expand data collection to multiple regions&quot;</span><span class="p">)</span>
                <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Weight samples by population demographics&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">recommendations</span><span class="p">:</span>
                <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Continue monitoring for emerging biases&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">recommendations</span>

    <span class="k">return</span> <span class="n">BiasDetectionPipeline</span><span class="p">()</span>

<span class="c1"># Example usage</span>
<span class="k">def</span><span class="w"> </span><span class="nf">demonstrate_bias_detection_pipeline</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Demonstrate the bias detection pipeline&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Bias Detection Pipeline Demonstration ===</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Create sample dataset and metadata</span>
    <span class="n">sample_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
        <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">500</span><span class="p">),</span>
        <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">],</span> <span class="mi">500</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">]),</span>
        <span class="s1">&#39;location&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;urban&#39;</span><span class="p">,</span> <span class="s1">&#39;rural&#39;</span><span class="p">],</span> <span class="mi">500</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">]),</span>
        <span class="s1">&#39;outcome&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">binomial</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
    <span class="p">})</span>

    <span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;online_survey&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sampling&quot;</span><span class="p">:</span> <span class="s2">&quot;convenience&quot;</span><span class="p">,</span> 
        <span class="s2">&quot;timeframe&quot;</span><span class="p">:</span> <span class="s2">&quot;2023-Q1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;geography&quot;</span><span class="p">:</span> <span class="s2">&quot;limited&quot;</span>
    <span class="p">}</span>

    <span class="n">pipeline</span> <span class="o">=</span> <span class="n">create_bias_detection_pipeline</span><span class="p">()</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">run_full_pipeline</span><span class="p">(</span>
        <span class="n">sample_data</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;location&#39;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pipeline Results:&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Bias indicators found: </span><span class="si">{</span><span class="n">results</span><span class="p">[</span><span class="s1">&#39;summary&#39;</span><span class="p">][</span><span class="s1">&#39;total_bias_indicators&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Severity: </span><span class="si">{</span><span class="n">results</span><span class="p">[</span><span class="s1">&#39;summary&#39;</span><span class="p">][</span><span class="s1">&#39;severity_assessment&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Bias types: </span><span class="si">{</span><span class="n">results</span><span class="p">[</span><span class="s1">&#39;summary&#39;</span><span class="p">][</span><span class="s1">&#39;bias_types_found&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Recommendations: </span><span class="si">{</span><span class="n">results</span><span class="p">[</span><span class="s1">&#39;summary&#39;</span><span class="p">][</span><span class="s1">&#39;recommendations&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">demonstrate_bias_detection_pipeline</span><span class="p">()</span>
</code></pre>
</div>
<h2 id="part-2-practical-bias-investigation-tools">Part 2: Practical Bias Investigation Tools<a class="headerlink" href="#part-2-practical-bias-investigation-tools" title="Permanent link">&para;</a></h2>
<p>Now I&rsquo;ll implement comprehensive tools for investigating bias through dataset provenance, missing groups detection, and measurement bias assessment.</p>
<div class="highlight python-template" data-fence-type="template" data-language="python">
<pre><code class="language-python"><span class="k">class</span><span class="w"> </span><span class="nc">DatasetProvenanceAnalyzer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tools for analyzing dataset provenance and potential bias introduction points&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">provenance_metadata</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bias_risk_factors</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;data_source&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;web_scraping&#39;</span><span class="p">:</span> <span class="mf">0.7</span><span class="p">,</span>  <span class="c1"># High risk due to selection bias</span>
                <span class="s1">&#39;surveys&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>        <span class="c1"># Moderate risk due to response bias</span>
                <span class="s1">&#39;administrative&#39;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span>  <span class="c1"># Lower risk but historical bias possible</span>
                <span class="s1">&#39;sensors&#39;</span><span class="p">:</span> <span class="mf">0.2</span>          <span class="c1"># Low risk for bias but can have measurement bias</span>
            <span class="p">},</span>
            <span class="s1">&#39;collection_method&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;convenience&#39;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span>
                <span class="s1">&#39;voluntary&#39;</span><span class="p">:</span> <span class="mf">0.7</span><span class="p">,</span>
                <span class="s1">&#39;random&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>
                <span class="s1">&#39;stratified&#39;</span><span class="p">:</span> <span class="mf">0.1</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">analyze_data_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset_metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Analyze data lineage to identify potential bias introduction points</span>

<span class="sd">        Args:</span>
<span class="sd">            dataset_metadata: Metadata about dataset creation and processing</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lineage_analysis</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;source_analysis&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;transformation_risks&#39;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s1">&#39;bias_risk_score&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s1">&#39;recommendations&#39;</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">}</span>

        <span class="c1"># Analyze data sources</span>
        <span class="n">sources</span> <span class="o">=</span> <span class="n">dataset_metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sources&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">total_source_risk</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="k">for</span> <span class="n">source</span> <span class="ow">in</span> <span class="n">sources</span><span class="p">:</span>
            <span class="n">source_type</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;unknown&#39;</span><span class="p">)</span>
            <span class="n">collection_method</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;collection_method&#39;</span><span class="p">,</span> <span class="s1">&#39;unknown&#39;</span><span class="p">)</span>

            <span class="n">source_risk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bias_risk_factors</span><span class="p">[</span><span class="s1">&#39;data_source&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">source_type</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
            <span class="n">method_risk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bias_risk_factors</span><span class="p">[</span><span class="s1">&#39;collection_method&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">collection_method</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>

            <span class="n">combined_risk</span> <span class="o">=</span> <span class="p">(</span><span class="n">source_risk</span> <span class="o">+</span> <span class="n">method_risk</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="n">total_source_risk</span> <span class="o">+=</span> <span class="n">combined_risk</span>

            <span class="n">lineage_analysis</span><span class="p">[</span><span class="s1">&#39;source_analysis&#39;</span><span class="p">][</span><span class="n">source</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;unnamed&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">source_type</span><span class="p">,</span>
                <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="n">collection_method</span><span class="p">,</span>
                <span class="s1">&#39;risk_score&#39;</span><span class="p">:</span> <span class="n">combined_risk</span><span class="p">,</span>
                <span class="s1">&#39;bias_indicators&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_identify_source_bias_indicators</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
            <span class="p">}</span>

        <span class="c1"># Analyze data transformations</span>
        <span class="n">transformations</span> <span class="o">=</span> <span class="n">dataset_metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;transformations&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">for</span> <span class="n">transform</span> <span class="ow">in</span> <span class="n">transformations</span><span class="p">:</span>
            <span class="n">risk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assess_transformation_bias_risk</span><span class="p">(</span><span class="n">transform</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">risk</span><span class="p">[</span><span class="s1">&#39;risk_level&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.3</span><span class="p">:</span>
                <span class="n">lineage_analysis</span><span class="p">[</span><span class="s1">&#39;transformation_risks&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">risk</span><span class="p">)</span>

        <span class="c1"># Calculate overall bias risk</span>
        <span class="n">lineage_analysis</span><span class="p">[</span><span class="s1">&#39;bias_risk_score&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">total_source_risk</span> <span class="o">/</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sources</span><span class="p">),</span> <span class="mi">1</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>

        <span class="c1"># Generate recommendations</span>
        <span class="n">lineage_analysis</span><span class="p">[</span><span class="s1">&#39;recommendations&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_provenance_recommendations</span><span class="p">(</span>
            <span class="n">lineage_analysis</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">lineage_analysis</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_identify_source_bias_indicators</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Identify potential bias indicators in a data source&quot;&quot;&quot;</span>
        <span class="n">indicators</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">source</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;geographic_scope&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;limited&#39;</span><span class="p">:</span>
            <span class="n">indicators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;geographic_bias&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">source</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;time_period_days&#39;</span><span class="p">,</span> <span class="mi">365</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">:</span>
            <span class="n">indicators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;temporal_bias&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">source</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;response_rate&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">:</span>
            <span class="n">indicators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;non_response_bias&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">source</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;access_requirements&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;internet_required&#39;</span><span class="p">:</span>
            <span class="n">indicators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;digital_divide_bias&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">indicators</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_assess_transformation_bias_risk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transformation</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Assess bias risk introduced by data transformations&quot;&quot;&quot;</span>
        <span class="n">transform_type</span> <span class="o">=</span> <span class="n">transformation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;unknown&#39;</span><span class="p">)</span>

        <span class="n">risk_levels</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;filtering&#39;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">,</span>      <span class="c1"># Can remove important subgroups</span>
            <span class="s1">&#39;sampling&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>       <span class="c1"># May introduce sampling bias</span>
            <span class="s1">&#39;feature_selection&#39;</span><span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span>  <span class="c1"># Could remove bias-relevant features</span>
            <span class="s1">&#39;normalization&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>   <span class="c1"># Generally lower risk</span>
            <span class="s1">&#39;encoding&#39;</span><span class="p">:</span> <span class="mf">0.1</span>        <span class="c1"># Low risk for bias</span>
        <span class="p">}</span>

        <span class="n">risk_level</span> <span class="o">=</span> <span class="n">risk_levels</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">transform_type</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;transformation&#39;</span><span class="p">:</span> <span class="n">transform_type</span><span class="p">,</span>
            <span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="n">transformation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;parameters&#39;</span><span class="p">,</span> <span class="p">{}),</span>
            <span class="s1">&#39;risk_level&#39;</span><span class="p">:</span> <span class="n">risk_level</span><span class="p">,</span>
            <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="n">transformation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_provenance_recommendations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">analysis</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate recommendations based on provenance analysis&quot;&quot;&quot;</span>
        <span class="n">recommendations</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">analysis</span><span class="p">[</span><span class="s1">&#39;bias_risk_score&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.7</span><span class="p">:</span>
            <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;High bias risk detected - consider alternative data sources&quot;</span><span class="p">)</span>
            <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Implement bias testing before model deployment&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">analysis</span><span class="p">[</span><span class="s1">&#39;transformation_risks&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Multiple transformation risks identified - review processing pipeline&quot;</span><span class="p">)</span>

        <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Document all data transformations for reproducibility&quot;</span><span class="p">)</span>
        <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Implement version control for dataset lineage tracking&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">recommendations</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MissingGroupsDetector</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tools for detecting underrepresented or missing demographic groups&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">demographic_benchmarks</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minimum_representation_threshold</span> <span class="o">=</span> <span class="mf">0.05</span>  <span class="c1"># 5% minimum representation</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_population_benchmarks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">benchmarks</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set population benchmarks for comparison</span>

<span class="sd">        Args:</span>
<span class="sd">            benchmarks: Dict mapping demographic attributes to expected distributions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">demographic_benchmarks</span> <span class="o">=</span> <span class="n">benchmarks</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">detect_missing_groups</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> 
                            <span class="n">demographic_columns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Detect missing or underrepresented demographic groups</span>

<span class="sd">        Args:</span>
<span class="sd">            dataset: Dataset to analyze</span>
<span class="sd">            demographic_columns: List of demographic attribute columns</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">detection_results</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;missing_groups&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;underrepresented_groups&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;representation_analysis&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;severity_scores&#39;</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">demographic_columns</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">column</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="n">detection_results</span><span class="p">[</span><span class="s1">&#39;missing_groups&#39;</span><span class="p">][</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Column not present in dataset&quot;</span>
                <span class="k">continue</span>

            <span class="c1"># Calculate actual distribution</span>
            <span class="n">actual_dist</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># Compare with benchmarks if available</span>
            <span class="k">if</span> <span class="n">column</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">demographic_benchmarks</span><span class="p">:</span>
                <span class="n">benchmark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">demographic_benchmarks</span><span class="p">[</span><span class="n">column</span><span class="p">]</span>
                <span class="n">missing_groups</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">underrepresented_groups</span> <span class="o">=</span> <span class="p">[]</span>

                <span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">expected_prop</span> <span class="ow">in</span> <span class="n">benchmark</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">actual_prop</span> <span class="o">=</span> <span class="n">actual_dist</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">actual_prop</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
                        <span class="n">missing_groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">actual_prop</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">minimum_representation_threshold</span><span class="p">:</span>
                        <span class="n">underrepresented_groups</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                            <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="n">group</span><span class="p">,</span>
                            <span class="s1">&#39;actual_proportion&#39;</span><span class="p">:</span> <span class="n">actual_prop</span><span class="p">,</span>
                            <span class="s1">&#39;expected_proportion&#39;</span><span class="p">:</span> <span class="n">expected_prop</span><span class="p">,</span>
                            <span class="s1">&#39;representation_ratio&#39;</span><span class="p">:</span> <span class="n">actual_prop</span> <span class="o">/</span> <span class="n">expected_prop</span> <span class="k">if</span> <span class="n">expected_prop</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
                        <span class="p">})</span>

                <span class="n">detection_results</span><span class="p">[</span><span class="s1">&#39;missing_groups&#39;</span><span class="p">][</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">missing_groups</span>
                <span class="n">detection_results</span><span class="p">[</span><span class="s1">&#39;underrepresented_groups&#39;</span><span class="p">][</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">underrepresented_groups</span>

                <span class="c1"># Calculate severity score</span>
                <span class="n">missing_severity</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">missing_groups</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">benchmark</span><span class="p">)</span>
                <span class="n">underrep_severity</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
                    <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">group</span><span class="p">[</span><span class="s1">&#39;representation_ratio&#39;</span><span class="p">])</span> 
                    <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">underrepresented_groups</span>
                <span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">benchmark</span><span class="p">)</span>

                <span class="n">detection_results</span><span class="p">[</span><span class="s1">&#39;severity_scores&#39;</span><span class="p">][</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">missing_severity</span> <span class="o">+</span> <span class="n">underrep_severity</span>

            <span class="n">detection_results</span><span class="p">[</span><span class="s1">&#39;representation_analysis&#39;</span><span class="p">][</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">actual_dist</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">detection_results</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate_sampling_strategy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">detection_results</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate targeted sampling strategy to address missing groups&quot;&quot;&quot;</span>
        <span class="n">sampling_strategy</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;priority_groups&#39;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s1">&#39;collection_targets&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;methods&#39;</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="n">column</span><span class="p">,</span> <span class="n">missing_groups</span> <span class="ow">in</span> <span class="n">detection_results</span><span class="p">[</span><span class="s1">&#39;missing_groups&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">missing_groups</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="n">missing_groups</span><span class="p">:</span>
                <span class="n">sampling_strategy</span><span class="p">[</span><span class="s1">&#39;priority_groups&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                    <span class="p">[(</span><span class="n">column</span><span class="p">,</span> <span class="n">group</span><span class="p">)</span> <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">missing_groups</span><span class="p">]</span>
                <span class="p">)</span>

        <span class="k">for</span> <span class="n">column</span><span class="p">,</span> <span class="n">underrep_groups</span> <span class="ow">in</span> <span class="n">detection_results</span><span class="p">[</span><span class="s1">&#39;underrepresented_groups&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">underrep_groups</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">group_info</span> <span class="ow">in</span> <span class="n">underrep_groups</span><span class="p">:</span>
                    <span class="n">group</span> <span class="o">=</span> <span class="n">group_info</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span>
                    <span class="n">current_prop</span> <span class="o">=</span> <span class="n">group_info</span><span class="p">[</span><span class="s1">&#39;actual_proportion&#39;</span><span class="p">]</span>
                    <span class="n">target_prop</span> <span class="o">=</span> <span class="n">group_info</span><span class="p">[</span><span class="s1">&#39;expected_proportion&#39;</span><span class="p">]</span>

                    <span class="c1"># Calculate how many additional samples needed</span>
                    <span class="n">additional_samples_needed</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
                        <span class="p">(</span><span class="n">target_prop</span> <span class="o">-</span> <span class="n">current_prop</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>  <span class="c1"># Assuming target of 1000 total samples</span>
                    <span class="p">)</span>

                    <span class="n">sampling_strategy</span><span class="p">[</span><span class="s1">&#39;collection_targets&#39;</span><span class="p">][(</span><span class="n">column</span><span class="p">,</span> <span class="n">group</span><span class="p">)]</span> <span class="o">=</span> <span class="n">additional_samples_needed</span>

        <span class="c1"># Suggest collection methods</span>
        <span class="k">if</span> <span class="n">sampling_strategy</span><span class="p">[</span><span class="s1">&#39;priority_groups&#39;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">sampling_strategy</span><span class="p">[</span><span class="s1">&#39;collection_targets&#39;</span><span class="p">]:</span>
            <span class="n">sampling_strategy</span><span class="p">[</span><span class="s1">&#39;methods&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;Targeted outreach to underrepresented communities&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Partner with organizations serving missing demographic groups&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Implement quota sampling to ensure representation&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Use online platforms with diverse user bases&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Conduct follow-up studies focused on missing groups&quot;</span>
            <span class="p">]</span>

        <span class="k">return</span> <span class="n">sampling_strategy</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MeasurementBiasAnalyzer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tools for detecting and analyzing measurement bias in datasets&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bias_indicators</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">analyze_measurement_consistency</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> 
                                      <span class="n">measurement_columns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
                                      <span class="n">grouping_variable</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Analyze measurement consistency across different groups</span>

<span class="sd">        Args:</span>
<span class="sd">            dataset: Dataset to analyze</span>
<span class="sd">            measurement_columns: Columns containing measurements to analyze</span>
<span class="sd">            grouping_variable: Variable to group by (e.g., demographic group)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">consistency_analysis</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;group_statistics&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;variance_analysis&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;bias_indicators&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;recommendations&#39;</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="n">measure_col</span> <span class="ow">in</span> <span class="n">measurement_columns</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">measure_col</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">group_stats</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">grouping_variable</span><span class="p">)[</span><span class="n">measure_col</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span>
                <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span>
            <span class="p">])</span>

            <span class="n">consistency_analysis</span><span class="p">[</span><span class="s1">&#39;group_statistics&#39;</span><span class="p">][</span><span class="n">measure_col</span><span class="p">]</span> <span class="o">=</span> <span class="n">group_stats</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

            <span class="c1"># Analyze variance differences (potential measurement bias indicator)</span>
            <span class="n">std_values</span> <span class="o">=</span> <span class="n">group_stats</span><span class="p">[</span><span class="s1">&#39;std&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
            <span class="n">std_ratio</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">std_values</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">std_values</span><span class="p">)</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">std_values</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>

            <span class="n">consistency_analysis</span><span class="p">[</span><span class="s1">&#39;variance_analysis&#39;</span><span class="p">][</span><span class="n">measure_col</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;std_ratio&#39;</span><span class="p">:</span> <span class="n">std_ratio</span><span class="p">,</span>
                <span class="s1">&#39;variance_heterogeneity&#39;</span><span class="p">:</span> <span class="n">std_ratio</span> <span class="o">&gt;</span> <span class="mf">2.0</span><span class="p">,</span>  <span class="c1"># Flag if ratio &gt; 2</span>
                <span class="s1">&#39;group_count_balance&#39;</span><span class="p">:</span> <span class="n">group_stats</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()</span> <span class="o">/</span> <span class="n">group_stats</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
            <span class="p">}</span>

            <span class="c1"># Identify bias indicators</span>
            <span class="n">bias_indicators</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="n">std_ratio</span> <span class="o">&gt;</span> <span class="mf">3.0</span><span class="p">:</span>
                <span class="n">bias_indicators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;high_variance_heterogeneity&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">group_stats</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">:</span>
                <span class="n">bias_indicators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;insufficient_group_sample_size&#39;</span><span class="p">)</span>

            <span class="c1"># Check for systematic differences in means</span>
            <span class="n">mean_values</span> <span class="o">=</span> <span class="n">group_stats</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">mean_values</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">mean_values</span><span class="p">))</span> <span class="o">&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">mean_values</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">bias_indicators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;systematic_group_differences&#39;</span><span class="p">)</span>

            <span class="n">consistency_analysis</span><span class="p">[</span><span class="s1">&#39;bias_indicators&#39;</span><span class="p">][</span><span class="n">measure_col</span><span class="p">]</span> <span class="o">=</span> <span class="n">bias_indicators</span>

        <span class="c1"># Generate recommendations</span>
        <span class="n">all_indicators</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">indicator</span> <span class="k">for</span> <span class="n">indicators</span> <span class="ow">in</span> <span class="n">consistency_analysis</span><span class="p">[</span><span class="s1">&#39;bias_indicators&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">indicator</span> <span class="ow">in</span> <span class="n">indicators</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="s1">&#39;high_variance_heterogeneity&#39;</span> <span class="ow">in</span> <span class="n">all_indicators</span><span class="p">:</span>
            <span class="n">consistency_analysis</span><span class="p">[</span><span class="s1">&#39;recommendations&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="s2">&quot;Investigate measurement procedures across groups for consistency&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;insufficient_group_sample_size&#39;</span> <span class="ow">in</span> <span class="n">all_indicators</span><span class="p">:</span>
            <span class="n">consistency_analysis</span><span class="p">[</span><span class="s1">&#39;recommendations&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="s2">&quot;Increase sample sizes for underrepresented groups&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;systematic_group_differences&#39;</span> <span class="ow">in</span> <span class="n">all_indicators</span><span class="p">:</span>
            <span class="n">consistency_analysis</span><span class="p">[</span><span class="s1">&#39;recommendations&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="s2">&quot;Examine whether group differences reflect true differences or measurement bias&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">consistency_analysis</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">detect_instrument_bias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> 
                             <span class="n">instrument_variable</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                             <span class="n">outcome_variables</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Detect potential instrument bias (different measurement tools/methods)</span>

<span class="sd">        Args:</span>
<span class="sd">            dataset: Dataset to analyze</span>
<span class="sd">            instrument_variable: Variable indicating measurement instrument/method</span>
<span class="sd">            outcome_variables: Variables measured by different instruments</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">instrument_analysis</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;instrument_effects&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;bias_assessment&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;calibration_needs&#39;</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="n">outcome</span> <span class="ow">in</span> <span class="n">outcome_variables</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">outcome</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># Analyze outcome distributions by instrument</span>
            <span class="n">instrument_stats</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">instrument_variable</span><span class="p">)[</span><span class="n">outcome</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span>
                <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span>
            <span class="p">])</span>

            <span class="c1"># Calculate effect sizes between instruments</span>
            <span class="n">instruments</span> <span class="o">=</span> <span class="n">instrument_stats</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="n">effect_sizes</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">instruments</span><span class="p">)):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">instruments</span><span class="p">)):</span>
                    <span class="n">inst1</span><span class="p">,</span> <span class="n">inst2</span> <span class="o">=</span> <span class="n">instruments</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">instruments</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                    <span class="n">mean1</span> <span class="o">=</span> <span class="n">instrument_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">inst1</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">]</span>
                    <span class="n">mean2</span> <span class="o">=</span> <span class="n">instrument_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">inst2</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">]</span>
                    <span class="n">std1</span> <span class="o">=</span> <span class="n">instrument_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">inst1</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">]</span>
                    <span class="n">std2</span> <span class="o">=</span> <span class="n">instrument_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">inst2</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">]</span>

                    <span class="c1"># Cohen&#39;s d</span>
                    <span class="n">pooled_std</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">std1</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">std2</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                    <span class="n">cohens_d</span> <span class="o">=</span> <span class="p">(</span><span class="n">mean1</span> <span class="o">-</span> <span class="n">mean2</span><span class="p">)</span> <span class="o">/</span> <span class="n">pooled_std</span> <span class="k">if</span> <span class="n">pooled_std</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>

                    <span class="n">effect_sizes</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">inst1</span><span class="si">}</span><span class="s2">_vs_</span><span class="si">{</span><span class="n">inst2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cohens_d</span>

            <span class="n">instrument_analysis</span><span class="p">[</span><span class="s1">&#39;instrument_effects&#39;</span><span class="p">][</span><span class="n">outcome</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;statistics&#39;</span><span class="p">:</span> <span class="n">instrument_stats</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
                <span class="s1">&#39;effect_sizes&#39;</span><span class="p">:</span> <span class="n">effect_sizes</span>
            <span class="p">}</span>

            <span class="c1"># Assess bias severity</span>
            <span class="n">max_effect_size</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">es</span><span class="p">)</span> <span class="k">for</span> <span class="n">es</span> <span class="ow">in</span> <span class="n">effect_sizes</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="k">if</span> <span class="n">effect_sizes</span> <span class="k">else</span> <span class="mi">0</span>
            <span class="n">bias_severity</span> <span class="o">=</span> <span class="s2">&quot;low&quot;</span> <span class="k">if</span> <span class="n">max_effect_size</span> <span class="o">&lt;</span> <span class="mf">0.2</span> <span class="k">else</span> <span class="s2">&quot;moderate&quot;</span> <span class="k">if</span> <span class="n">max_effect_size</span> <span class="o">&lt;</span> <span class="mf">0.5</span> <span class="k">else</span> <span class="s2">&quot;high&quot;</span>

            <span class="n">instrument_analysis</span><span class="p">[</span><span class="s1">&#39;bias_assessment&#39;</span><span class="p">][</span><span class="n">outcome</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;max_effect_size&#39;</span><span class="p">:</span> <span class="n">max_effect_size</span><span class="p">,</span>
                <span class="s1">&#39;severity&#39;</span><span class="p">:</span> <span class="n">bias_severity</span><span class="p">,</span>
                <span class="s1">&#39;requires_calibration&#39;</span><span class="p">:</span> <span class="n">max_effect_size</span> <span class="o">&gt;</span> <span class="mf">0.3</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="n">max_effect_size</span> <span class="o">&gt;</span> <span class="mf">0.3</span><span class="p">:</span>
                <span class="n">instrument_analysis</span><span class="p">[</span><span class="s1">&#39;calibration_needs&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">outcome</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">instrument_analysis</span>

<span class="c1"># Demonstration function</span>
<span class="k">def</span><span class="w"> </span><span class="nf">demonstrate_practical_investigation_tools</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Demonstrate practical bias investigation tools&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Practical Bias Investigation Tools Demonstration ===</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Create sample dataset with bias issues</span>
    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
    <span class="n">n_samples</span> <span class="o">=</span> <span class="mi">1000</span>

    <span class="c1"># Simulate missing groups and measurement bias</span>
    <span class="n">age_groups</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;18-25&#39;</span><span class="p">,</span> <span class="s1">&#39;26-40&#39;</span><span class="p">,</span> <span class="s1">&#39;41-60&#39;</span><span class="p">],</span> <span class="n">n_samples</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">])</span>  <span class="c1"># Missing 60+</span>
    <span class="n">regions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;urban&#39;</span><span class="p">,</span> <span class="s1">&#39;suburban&#39;</span><span class="p">],</span> <span class="n">n_samples</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">])</span>  <span class="c1"># Missing rural</span>

    <span class="c1"># Simulate measurement bias - different instruments give different readings</span>
    <span class="n">instrument</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">],</span> <span class="n">n_samples</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
    <span class="n">base_score</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">n_samples</span><span class="p">)</span>
    <span class="c1"># Instrument A systematically reads higher</span>
    <span class="n">score</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">instrument</span> <span class="o">==</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="n">base_score</span> <span class="o">*</span> <span class="mf">1.1</span><span class="p">,</span> <span class="n">base_score</span><span class="p">)</span>

    <span class="n">dataset</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
        <span class="s1">&#39;age_group&#39;</span><span class="p">:</span> <span class="n">age_groups</span><span class="p">,</span>
        <span class="s1">&#39;region&#39;</span><span class="p">:</span> <span class="n">regions</span><span class="p">,</span>
        <span class="s1">&#39;instrument&#39;</span><span class="p">:</span> <span class="n">instrument</span><span class="p">,</span>
        <span class="s1">&#39;test_score&#39;</span><span class="p">:</span> <span class="n">score</span><span class="p">,</span>
        <span class="s1">&#39;income&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">50000</span><span class="p">,</span> <span class="mi">20000</span><span class="p">,</span> <span class="n">n_samples</span><span class="p">)</span>
    <span class="p">})</span>

    <span class="c1"># 1. Dataset Provenance Analysis</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1. Dataset Provenance Analysis:&quot;</span><span class="p">)</span>
    <span class="n">provenance_analyzer</span> <span class="o">=</span> <span class="n">DatasetProvenanceAnalyzer</span><span class="p">()</span>

    <span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;sources&#39;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;online_survey&#39;</span><span class="p">,</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;surveys&#39;</span><span class="p">,</span>
            <span class="s1">&#39;collection_method&#39;</span><span class="p">:</span> <span class="s1">&#39;convenience&#39;</span><span class="p">,</span>
            <span class="s1">&#39;geographic_scope&#39;</span><span class="p">:</span> <span class="s1">&#39;limited&#39;</span><span class="p">,</span>
            <span class="s1">&#39;response_rate&#39;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span>
            <span class="s1">&#39;access_requirements&#39;</span><span class="p">:</span> <span class="s1">&#39;internet_required&#39;</span>
        <span class="p">}],</span>
        <span class="s1">&#39;transformations&#39;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;filtering&#39;</span><span class="p">,</span>
            <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Removed incomplete responses&#39;</span><span class="p">,</span>
            <span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;min_completion&#39;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">}</span>
        <span class="p">}]</span>
    <span class="p">}</span>

    <span class="n">lineage_analysis</span> <span class="o">=</span> <span class="n">provenance_analyzer</span><span class="o">.</span><span class="n">analyze_data_lineage</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Bias risk score: </span><span class="si">{</span><span class="n">lineage_analysis</span><span class="p">[</span><span class="s1">&#39;bias_risk_score&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Transformation risks: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">lineage_analysis</span><span class="p">[</span><span class="s1">&#39;transformation_risks&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>

    <span class="c1"># 2. Missing Groups Detection</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;2. Missing Groups Detection:&quot;</span><span class="p">)</span>
    <span class="n">missing_detector</span> <span class="o">=</span> <span class="n">MissingGroupsDetector</span><span class="p">()</span>

    <span class="c1"># Set population benchmarks</span>
    <span class="n">benchmarks</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;age_group&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;18-25&#39;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span> <span class="s1">&#39;26-40&#39;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span> <span class="s1">&#39;41-60&#39;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span> <span class="s1">&#39;60+&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">},</span>
        <span class="s1">&#39;region&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;urban&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;suburban&#39;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span> <span class="s1">&#39;rural&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">}</span>
    <span class="p">}</span>
    <span class="n">missing_detector</span><span class="o">.</span><span class="n">set_population_benchmarks</span><span class="p">(</span><span class="n">benchmarks</span><span class="p">)</span>

    <span class="n">missing_analysis</span> <span class="o">=</span> <span class="n">missing_detector</span><span class="o">.</span><span class="n">detect_missing_groups</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;age_group&#39;</span><span class="p">,</span> <span class="s1">&#39;region&#39;</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Missing groups: </span><span class="si">{</span><span class="n">missing_analysis</span><span class="p">[</span><span class="s1">&#39;missing_groups&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Severity scores: </span><span class="si">{</span><span class="n">missing_analysis</span><span class="p">[</span><span class="s1">&#39;severity_scores&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>

    <span class="c1"># 3. Measurement Bias Analysis</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;3. Measurement Bias Analysis:&quot;</span><span class="p">)</span>
    <span class="n">measurement_analyzer</span> <span class="o">=</span> <span class="n">MeasurementBiasAnalyzer</span><span class="p">()</span>

    <span class="n">consistency_analysis</span> <span class="o">=</span> <span class="n">measurement_analyzer</span><span class="o">.</span><span class="n">analyze_measurement_consistency</span><span class="p">(</span>
        <span class="n">dataset</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;test_score&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">],</span> <span class="s1">&#39;age_group&#39;</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Bias indicators: </span><span class="si">{</span><span class="n">consistency_analysis</span><span class="p">[</span><span class="s1">&#39;bias_indicators&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">instrument_analysis</span> <span class="o">=</span> <span class="n">measurement_analyzer</span><span class="o">.</span><span class="n">detect_instrument_bias</span><span class="p">(</span>
        <span class="n">dataset</span><span class="p">,</span> <span class="s1">&#39;instrument&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;test_score&#39;</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Instrument bias assessment: </span><span class="si">{</span><span class="n">instrument_analysis</span><span class="p">[</span><span class="s1">&#39;bias_assessment&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Calibration needed for: </span><span class="si">{</span><span class="n">instrument_analysis</span><span class="p">[</span><span class="s1">&#39;calibration_needs&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">demonstrate_practical_investigation_tools</span><span class="p">()</span>
</code></pre>
</div>
<h2 id="part-3-bias-mitigation-strategies">Part 3: Bias Mitigation Strategies<a class="headerlink" href="#part-3-bias-mitigation-strategies" title="Permanent link">&para;</a></h2>
<p>This section implements comprehensive frameworks for mitigating bias through diverse data collection, reweighting techniques, and fairness-aware metrics.</p>
<div class="highlight python-template" data-fence-type="template" data-language="python">
<pre><code class="language-python"><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.utils.class_weight</span><span class="w"> </span><span class="kn">import</span> <span class="n">compute_class_weight</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">classification_report</span><span class="p">,</span> <span class="n">confusion_matrix</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">DiverseDataCollectionFramework</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Framework for implementing diverse and representative data collection strategies&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collection_strategies</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;stratified_sampling&#39;</span><span class="p">:</span> <span class="s1">&#39;Ensure proportional representation across groups&#39;</span><span class="p">,</span>
            <span class="s1">&#39;quota_sampling&#39;</span><span class="p">:</span> <span class="s1">&#39;Set minimum representation targets for each group&#39;</span><span class="p">,</span>
            <span class="s1">&#39;snowball_sampling&#39;</span><span class="p">:</span> <span class="s1">&#39;Use existing participants to reach underrepresented groups&#39;</span><span class="p">,</span>
            <span class="s1">&#39;adaptive_sampling&#39;</span><span class="p">:</span> <span class="s1">&#39;Adjust collection based on ongoing representativeness analysis&#39;</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">diversity_metrics</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">design_stratified_collection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_population</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span> 
                                   <span class="n">total_sample_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Design stratified sampling strategy to ensure representative collection</span>

<span class="sd">        Args:</span>
<span class="sd">            target_population: Target distributions for each demographic attribute</span>
<span class="sd">            total_sample_size: Total number of samples to collect</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">collection_plan</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;strategy&#39;</span><span class="p">:</span> <span class="s1">&#39;stratified_sampling&#39;</span><span class="p">,</span>
            <span class="s1">&#39;total_size&#39;</span><span class="p">:</span> <span class="n">total_sample_size</span><span class="p">,</span>
            <span class="s1">&#39;strata_targets&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;collection_priorities&#39;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s1">&#39;quality_checks&#39;</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">}</span>

        <span class="c1"># Calculate sample sizes for each stratum</span>
        <span class="k">for</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">distribution</span> <span class="ow">in</span> <span class="n">target_population</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">strata_sizes</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">proportion</span> <span class="ow">in</span> <span class="n">distribution</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">target_size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">total_sample_size</span> <span class="o">*</span> <span class="n">proportion</span><span class="p">)</span>
                <span class="n">strata_sizes</span><span class="p">[</span><span class="n">group</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">target_size</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>  <span class="c1"># Minimum 30 per group</span>

            <span class="n">collection_plan</span><span class="p">[</span><span class="s1">&#39;strata_targets&#39;</span><span class="p">][</span><span class="n">attribute</span><span class="p">]</span> <span class="o">=</span> <span class="n">strata_sizes</span>

        <span class="c1"># Identify collection priorities (hardest to reach groups)</span>
        <span class="n">collection_plan</span><span class="p">[</span><span class="s1">&#39;collection_priorities&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;rural_populations&#39;</span><span class="p">,</span>
            <span class="s1">&#39;elderly_demographics&#39;</span><span class="p">,</span>
            <span class="s1">&#39;low_income_groups&#39;</span><span class="p">,</span>
            <span class="s1">&#39;minority_communities&#39;</span><span class="p">,</span>
            <span class="s1">&#39;disability_communities&#39;</span>
        <span class="p">]</span>

        <span class="c1"># Define quality checks</span>
        <span class="n">collection_plan</span><span class="p">[</span><span class="s1">&#39;quality_checks&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;weekly_representativeness_analysis&#39;</span><span class="p">,</span>
            <span class="s1">&#39;response_quality_assessment&#39;</span><span class="p">,</span>
            <span class="s1">&#39;completion_rate_monitoring&#39;</span><span class="p">,</span>
            <span class="s1">&#39;demographic_balance_tracking&#39;</span>
        <span class="p">]</span>

        <span class="k">return</span> <span class="n">collection_plan</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">implement_quota_sampling</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_sample</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> 
                                <span class="n">target_quotas</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]],</span>
                                <span class="n">demographic_cols</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Implement quota sampling to meet representation targets</span>

<span class="sd">        Args:</span>
<span class="sd">            current_sample: Existing collected data</span>
<span class="sd">            target_quotas: Target sample sizes for each group</span>
<span class="sd">            demographic_cols: Demographic columns to consider</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">quota_analysis</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;current_status&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;remaining_quotas&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;collection_adjustments&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;completion_rate&#39;</span><span class="p">:</span> <span class="mf">0.0</span>
        <span class="p">}</span>

        <span class="n">total_collected</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">total_target</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">demographic_cols</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">col</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">current_sample</span><span class="o">.</span><span class="n">columns</span> <span class="ow">or</span> <span class="n">col</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">target_quotas</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">current_counts</span> <span class="o">=</span> <span class="n">current_sample</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="n">target_counts</span> <span class="o">=</span> <span class="n">target_quotas</span><span class="p">[</span><span class="n">col</span><span class="p">]</span>

            <span class="n">quota_analysis</span><span class="p">[</span><span class="s1">&#39;current_status&#39;</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">current_counts</span>
            <span class="n">quota_analysis</span><span class="p">[</span><span class="s1">&#39;remaining_quotas&#39;</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">target_counts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">current</span> <span class="o">=</span> <span class="n">current_counts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">remaining</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">target</span> <span class="o">-</span> <span class="n">current</span><span class="p">)</span>
                <span class="n">quota_analysis</span><span class="p">[</span><span class="s1">&#39;remaining_quotas&#39;</span><span class="p">][</span><span class="n">col</span><span class="p">][</span><span class="n">group</span><span class="p">]</span> <span class="o">=</span> <span class="n">remaining</span>

                <span class="n">total_collected</span> <span class="o">+=</span> <span class="n">current</span>
                <span class="n">total_target</span> <span class="o">+=</span> <span class="n">target</span>

        <span class="n">quota_analysis</span><span class="p">[</span><span class="s1">&#39;completion_rate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">total_collected</span> <span class="o">/</span> <span class="n">total_target</span> <span class="k">if</span> <span class="n">total_target</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>

        <span class="c1"># Generate collection adjustments</span>
        <span class="n">quota_analysis</span><span class="p">[</span><span class="s1">&#39;collection_adjustments&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_collection_adjustments</span><span class="p">(</span>
            <span class="n">quota_analysis</span><span class="p">[</span><span class="s1">&#39;remaining_quotas&#39;</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">quota_analysis</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_collection_adjustments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">remaining_quotas</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate specific collection adjustment recommendations&quot;&quot;&quot;</span>
        <span class="n">adjustments</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="n">quotas</span> <span class="ow">in</span> <span class="n">remaining_quotas</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">high_need_groups</span> <span class="o">=</span> <span class="p">[</span><span class="n">group</span> <span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">need</span> <span class="ow">in</span> <span class="n">quotas</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">need</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">high_need_groups</span><span class="p">:</span>
                <span class="n">adjustments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Priority collection needed for </span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">high_need_groups</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">adjustments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Consider targeted outreach campaigns for underrepresented </span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2"> groups&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">adjustments</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_diversity_score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> 
                                <span class="n">demographic_cols</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
                                <span class="n">target_distributions</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate overall diversity score for the dataset</span>

<span class="sd">        Args:</span>
<span class="sd">            dataset: Dataset to evaluate</span>
<span class="sd">            demographic_cols: Demographic columns to consider  </span>
<span class="sd">            target_distributions: Target distributions for comparison</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">diversity_scores</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">demographic_cols</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">col</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dataset</span><span class="o">.</span><span class="n">columns</span> <span class="ow">or</span> <span class="n">col</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">target_distributions</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">actual_dist</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="n">target_dist</span> <span class="o">=</span> <span class="n">target_distributions</span><span class="p">[</span><span class="n">col</span><span class="p">]</span>

            <span class="c1"># Calculate Jensen-Shannon divergence as diversity metric</span>
            <span class="n">all_groups</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">actual_dist</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">target_dist</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

            <span class="n">actual_probs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">actual_dist</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">all_groups</span><span class="p">])</span>
            <span class="n">target_probs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">target_dist</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">all_groups</span><span class="p">])</span>

            <span class="c1"># Normalize probabilities</span>
            <span class="n">actual_probs</span> <span class="o">=</span> <span class="n">actual_probs</span> <span class="o">/</span> <span class="n">actual_probs</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="k">if</span> <span class="n">actual_probs</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">actual_probs</span>
            <span class="n">target_probs</span> <span class="o">=</span> <span class="n">target_probs</span> <span class="o">/</span> <span class="n">target_probs</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="k">if</span> <span class="n">target_probs</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">target_probs</span>

            <span class="c1"># Calculate JS divergence (simplified)</span>
            <span class="n">avg_probs</span> <span class="o">=</span> <span class="p">(</span><span class="n">actual_probs</span> <span class="o">+</span> <span class="n">target_probs</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>

            <span class="k">def</span><span class="w"> </span><span class="nf">kl_divergence</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">q</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">p</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">((</span><span class="n">p</span> <span class="o">+</span> <span class="mf">1e-10</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">q</span> <span class="o">+</span> <span class="mf">1e-10</span><span class="p">)))</span>

            <span class="n">js_div</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">kl_divergence</span><span class="p">(</span><span class="n">actual_probs</span><span class="p">,</span> <span class="n">avg_probs</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">kl_divergence</span><span class="p">(</span><span class="n">target_probs</span><span class="p">,</span> <span class="n">avg_probs</span><span class="p">)</span>
            <span class="n">diversity_score</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">js_div</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>  <span class="c1"># Convert to similarity score</span>

            <span class="n">diversity_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">diversity_score</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">diversity_scores</span><span class="p">)</span> <span class="k">if</span> <span class="n">diversity_scores</span> <span class="k">else</span> <span class="mf">0.0</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BiasReweightingFramework</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Framework for implementing various bias mitigation through reweighting techniques&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reweighting_methods</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;inverse_propensity&#39;</span><span class="p">:</span> <span class="s1">&#39;Weight samples inversely proportional to group representation&#39;</span><span class="p">,</span>
            <span class="s1">&#39;fairness_constraints&#39;</span><span class="p">:</span> <span class="s1">&#39;Apply constraints to ensure group-wise fairness&#39;</span><span class="p">,</span>
            <span class="s1">&#39;adversarial_debiasing&#39;</span><span class="p">:</span> <span class="s1">&#39;Use adversarial training to remove demographic dependencies&#39;</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_inverse_propensity_weights</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
                                           <span class="n">protected_attribute</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                           <span class="n">target_distribution</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate inverse propensity weights to balance group representation</span>

<span class="sd">        Args:</span>
<span class="sd">            dataset: Dataset to reweight</span>
<span class="sd">            protected_attribute: Protected attribute column</span>
<span class="sd">            target_distribution: Target distribution (uniform if None)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">group_counts</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="n">protected_attribute</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
        <span class="n">total_samples</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">target_distribution</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Uniform distribution</span>
            <span class="n">n_groups</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">group_counts</span><span class="p">)</span>
            <span class="n">target_distribution</span> <span class="o">=</span> <span class="p">{</span><span class="n">group</span><span class="p">:</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">n_groups</span> <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">group_counts</span><span class="o">.</span><span class="n">index</span><span class="p">}</span>

        <span class="c1"># Calculate weights</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">group_counts</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            <span class="n">group_mask</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="n">protected_attribute</span><span class="p">]</span> <span class="o">==</span> <span class="n">group</span>
            <span class="n">current_prop</span> <span class="o">=</span> <span class="n">group_counts</span><span class="p">[</span><span class="n">group</span><span class="p">]</span> <span class="o">/</span> <span class="n">total_samples</span>
            <span class="n">target_prop</span> <span class="o">=</span> <span class="n">target_distribution</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">current_prop</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">current_prop</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">weight</span> <span class="o">=</span> <span class="n">target_prop</span> <span class="o">/</span> <span class="n">current_prop</span>
                <span class="n">weights</span><span class="p">[</span><span class="n">group_mask</span><span class="p">]</span> <span class="o">=</span> <span class="n">weight</span>

        <span class="c1"># Normalize weights to sum to original dataset size</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="n">weights</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span> <span class="o">/</span> <span class="n">weights</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">weights</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">apply_fairness_constraints_reweighting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
                                             <span class="n">protected_attr</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
                                             <span class="n">fairness_metric</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;demographic_parity&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Apply reweighting to satisfy fairness constraints</span>

<span class="sd">        Args:</span>
<span class="sd">            X: Feature matrix</span>
<span class="sd">            y: Target labels</span>
<span class="sd">            protected_attr: Protected attribute values</span>
<span class="sd">            fairness_metric: Type of fairness to optimize for</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">unique_groups</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">protected_attr</span><span class="p">)</span>
        <span class="n">unique_labels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

        <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">fairness_metric</span> <span class="o">==</span> <span class="s1">&#39;demographic_parity&#39;</span><span class="p">:</span>
            <span class="c1"># Balance positive prediction rates across groups</span>
            <span class="n">overall_positive_rate</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">unique_groups</span><span class="p">:</span>
                <span class="n">group_mask</span> <span class="o">=</span> <span class="n">protected_attr</span> <span class="o">==</span> <span class="n">group</span>
                <span class="n">group_positive_rate</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="n">group_mask</span><span class="p">])</span>

                <span class="k">if</span> <span class="n">group_positive_rate</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># Adjust weights to match overall positive rate</span>
                    <span class="n">positive_mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">protected_attr</span> <span class="o">==</span> <span class="n">group</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">y</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="n">negative_mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">protected_attr</span> <span class="o">==</span> <span class="n">group</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">y</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">positive_mask</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">weights</span><span class="p">[</span><span class="n">positive_mask</span><span class="p">]</span> <span class="o">*=</span> <span class="p">(</span><span class="n">overall_positive_rate</span> <span class="o">/</span> <span class="n">group_positive_rate</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">negative_mask</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">weights</span><span class="p">[</span><span class="n">negative_mask</span><span class="p">]</span> <span class="o">*=</span> <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">overall_positive_rate</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">group_positive_rate</span><span class="p">))</span>

        <span class="k">elif</span> <span class="n">fairness_metric</span> <span class="o">==</span> <span class="s1">&#39;equalized_odds&#39;</span><span class="p">:</span>
            <span class="c1"># Balance true positive and false positive rates across groups</span>
            <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">unique_labels</span><span class="p">:</span>
                <span class="n">label_mask</span> <span class="o">=</span> <span class="n">y</span> <span class="o">==</span> <span class="n">label</span>
                <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">label_mask</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="n">overall_rate</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">label_mask</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">unique_groups</span><span class="p">:</span>
                    <span class="n">group_label_mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">protected_attr</span> <span class="o">==</span> <span class="n">group</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">label_mask</span>
                    <span class="n">group_mask</span> <span class="o">=</span> <span class="n">protected_attr</span> <span class="o">==</span> <span class="n">group</span>

                    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">group_mask</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">group_rate</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">group_label_mask</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">group_mask</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">group_rate</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">adjustment</span> <span class="o">=</span> <span class="n">overall_rate</span> <span class="o">/</span> <span class="n">group_rate</span>
                            <span class="n">weights</span><span class="p">[</span><span class="n">group_label_mask</span><span class="p">]</span> <span class="o">*=</span> <span class="n">adjustment</span>

        <span class="c1"># Normalize weights</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="n">weights</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)</span> <span class="o">/</span> <span class="n">weights</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">weights</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">implement_adversarial_debiasing_weights</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> 
                                              <span class="n">protected_attr</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
                                              <span class="n">learning_rate</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Implement adversarial debiasing through sample reweighting</span>

<span class="sd">        Args:</span>
<span class="sd">            X: Feature matrix</span>
<span class="sd">            protected_attr: Protected attribute values</span>
<span class="sd">            learning_rate: Learning rate for weight updates</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Simplified adversarial reweighting</span>
        <span class="c1"># In practice, this would involve training adversarial networks</span>

        <span class="n">n_samples</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">n_samples</span><span class="p">)</span>

        <span class="c1"># Calculate feature importance for predicting protected attribute</span>
        <span class="c1"># Use correlation as a simple proxy</span>
        <span class="n">feature_correlations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">feature_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">X</span><span class="p">[:,</span> <span class="n">feature_idx</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">corr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">corrcoef</span><span class="p">(</span><span class="n">X</span><span class="p">[:,</span> <span class="n">feature_idx</span><span class="p">],</span> <span class="n">protected_attr</span><span class="p">)[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">feature_correlations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">corr</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">feature_correlations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">feature_correlations</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">feature_correlations</span><span class="p">)</span>

        <span class="c1"># Reweight samples based on how predictive their features are of protected attribute</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
            <span class="n">sample_predictiveness</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">feature_correlations</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]))</span>
            <span class="c1"># Lower weight for samples that make protected attribute easy to predict</span>
            <span class="n">weights</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">sample_predictiveness</span><span class="p">)</span>

        <span class="c1"># Normalize weights</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="n">weights</span> <span class="o">*</span> <span class="p">(</span><span class="n">n_samples</span> <span class="o">/</span> <span class="n">weights</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">weights</span>

<span class="k">class</span><span class="w"> </span><span class="nc">FairnessAwareMetrics</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Framework for implementing and calculating fairness-aware evaluation metrics&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fairness_metrics</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;demographic_parity&#39;</span><span class="p">:</span> <span class="s1">&#39;Equal positive prediction rates across groups&#39;</span><span class="p">,</span>
            <span class="s1">&#39;equalized_odds&#39;</span><span class="p">:</span> <span class="s1">&#39;Equal TPR and FPR across groups&#39;</span><span class="p">,</span>
            <span class="s1">&#39;equal_opportunity&#39;</span><span class="p">:</span> <span class="s1">&#39;Equal TPR across groups&#39;</span><span class="p">,</span>
            <span class="s1">&#39;calibration&#39;</span><span class="p">:</span> <span class="s1">&#39;Equal precision across groups for same confidence levels&#39;</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_demographic_parity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> 
                                   <span class="n">protected_attr</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate demographic parity metrics&quot;&quot;&quot;</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">protected_attr</span><span class="p">)</span>
        <span class="n">group_rates</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
            <span class="n">group_mask</span> <span class="o">=</span> <span class="n">protected_attr</span> <span class="o">==</span> <span class="n">group</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">group_mask</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">positive_rate</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">y_pred</span><span class="p">[</span><span class="n">group_mask</span><span class="p">])</span>
                <span class="n">group_rates</span><span class="p">[</span><span class="n">group</span><span class="p">]</span> <span class="o">=</span> <span class="n">positive_rate</span>

        <span class="c1"># Calculate parity measures</span>
        <span class="n">rates</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">group_rates</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="n">parity_difference</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">rates</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">rates</span><span class="p">)</span> <span class="k">if</span> <span class="n">rates</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="n">parity_ratio</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">rates</span><span class="p">)</span> <span class="o">/</span> <span class="nb">max</span><span class="p">(</span><span class="n">rates</span><span class="p">)</span> <span class="k">if</span> <span class="n">rates</span> <span class="ow">and</span> <span class="nb">max</span><span class="p">(</span><span class="n">rates</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;group_rates&#39;</span><span class="p">:</span> <span class="n">group_rates</span><span class="p">,</span>
            <span class="s1">&#39;parity_difference&#39;</span><span class="p">:</span> <span class="n">parity_difference</span><span class="p">,</span>
            <span class="s1">&#39;parity_ratio&#39;</span><span class="p">:</span> <span class="n">parity_ratio</span><span class="p">,</span>
            <span class="s1">&#39;is_fair&#39;</span><span class="p">:</span> <span class="n">parity_difference</span> <span class="o">&lt;</span> <span class="mf">0.1</span>  <span class="c1"># Common threshold</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_equalized_odds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y_true</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
                               <span class="n">protected_attr</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate equalized odds metrics&quot;&quot;&quot;</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">protected_attr</span><span class="p">)</span>
        <span class="n">group_metrics</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
            <span class="n">group_mask</span> <span class="o">=</span> <span class="n">protected_attr</span> <span class="o">==</span> <span class="n">group</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">group_mask</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">y_true_group</span> <span class="o">=</span> <span class="n">y_true</span><span class="p">[</span><span class="n">group_mask</span><span class="p">]</span>
                <span class="n">y_pred_group</span> <span class="o">=</span> <span class="n">y_pred</span><span class="p">[</span><span class="n">group_mask</span><span class="p">]</span>

                <span class="c1"># True Positive Rate</span>
                <span class="n">tpr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">y_pred_group</span><span class="p">[</span><span class="n">y_true_group</span> <span class="o">==</span> <span class="mi">1</span><span class="p">])</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">y_true_group</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>

                <span class="c1"># False Positive Rate  </span>
                <span class="n">fpr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">y_pred_group</span><span class="p">[</span><span class="n">y_true_group</span> <span class="o">==</span> <span class="mi">0</span><span class="p">])</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">y_true_group</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>

                <span class="n">group_metrics</span><span class="p">[</span><span class="n">group</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;tpr&#39;</span><span class="p">:</span> <span class="n">tpr</span><span class="p">,</span> <span class="s1">&#39;fpr&#39;</span><span class="p">:</span> <span class="n">fpr</span><span class="p">}</span>

        <span class="c1"># Calculate equalized odds violations</span>
        <span class="n">tprs</span> <span class="o">=</span> <span class="p">[</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;tpr&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">metrics</span> <span class="ow">in</span> <span class="n">group_metrics</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
        <span class="n">fprs</span> <span class="o">=</span> <span class="p">[</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;fpr&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">metrics</span> <span class="ow">in</span> <span class="n">group_metrics</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>

        <span class="n">tpr_difference</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">tprs</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">tprs</span><span class="p">)</span> <span class="k">if</span> <span class="n">tprs</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="n">fpr_difference</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">fprs</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">fprs</span><span class="p">)</span> <span class="k">if</span> <span class="n">fprs</span> <span class="k">else</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;group_metrics&#39;</span><span class="p">:</span> <span class="n">group_metrics</span><span class="p">,</span>
            <span class="s1">&#39;tpr_difference&#39;</span><span class="p">:</span> <span class="n">tpr_difference</span><span class="p">,</span>
            <span class="s1">&#39;fpr_difference&#39;</span><span class="p">:</span> <span class="n">fpr_difference</span><span class="p">,</span>
            <span class="s1">&#39;max_violation&#39;</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">tpr_difference</span><span class="p">,</span> <span class="n">fpr_difference</span><span class="p">),</span>
            <span class="s1">&#39;is_fair&#39;</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">tpr_difference</span><span class="p">,</span> <span class="n">fpr_difference</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.1</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_calibration_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y_true</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">y_prob</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
                                    <span class="n">protected_attr</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> 
                                    <span class="n">n_bins</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate calibration fairness metrics&quot;&quot;&quot;</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">protected_attr</span><span class="p">)</span>
        <span class="n">calibration_metrics</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
            <span class="n">group_mask</span> <span class="o">=</span> <span class="n">protected_attr</span> <span class="o">==</span> <span class="n">group</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">group_mask</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">y_true_group</span> <span class="o">=</span> <span class="n">y_true</span><span class="p">[</span><span class="n">group_mask</span><span class="p">]</span>
            <span class="n">y_prob_group</span> <span class="o">=</span> <span class="n">y_prob</span><span class="p">[</span><span class="n">group_mask</span><span class="p">]</span>

            <span class="c1"># Calculate calibration curve</span>
            <span class="n">bin_boundaries</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n_bins</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">bin_centers</span> <span class="o">=</span> <span class="p">(</span><span class="n">bin_boundaries</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">bin_boundaries</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="o">/</span> <span class="mi">2</span>

            <span class="n">calibration_error</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">bin_accuracies</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">bin_confidences</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_bins</span><span class="p">):</span>
                <span class="n">bin_mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_prob_group</span> <span class="o">&gt;=</span> <span class="n">bin_boundaries</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">y_prob_group</span> <span class="o">&lt;</span> <span class="n">bin_boundaries</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">bin_mask</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">bin_accuracy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">y_true_group</span><span class="p">[</span><span class="n">bin_mask</span><span class="p">])</span>
                    <span class="n">bin_confidence</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">y_prob_group</span><span class="p">[</span><span class="n">bin_mask</span><span class="p">])</span>
                    <span class="n">bin_weight</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">bin_mask</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">y_prob_group</span><span class="p">)</span>

                    <span class="n">calibration_error</span> <span class="o">+=</span> <span class="n">bin_weight</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">bin_accuracy</span> <span class="o">-</span> <span class="n">bin_confidence</span><span class="p">)</span>
                    <span class="n">bin_accuracies</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bin_accuracy</span><span class="p">)</span>
                    <span class="n">bin_confidences</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bin_confidence</span><span class="p">)</span>

            <span class="n">calibration_metrics</span><span class="p">[</span><span class="n">group</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;calibration_error&#39;</span><span class="p">:</span> <span class="n">calibration_error</span><span class="p">,</span>
                <span class="s1">&#39;bin_accuracies&#39;</span><span class="p">:</span> <span class="n">bin_accuracies</span><span class="p">,</span>
                <span class="s1">&#39;bin_confidences&#39;</span><span class="p">:</span> <span class="n">bin_confidences</span>
            <span class="p">}</span>

        <span class="c1"># Calculate calibration fairness</span>
        <span class="n">calibration_errors</span> <span class="o">=</span> <span class="p">[</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;calibration_error&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">metrics</span> <span class="ow">in</span> <span class="n">calibration_metrics</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
        <span class="n">calibration_difference</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">calibration_errors</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">calibration_errors</span><span class="p">)</span> <span class="k">if</span> <span class="n">calibration_errors</span> <span class="k">else</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;group_calibration&#39;</span><span class="p">:</span> <span class="n">calibration_metrics</span><span class="p">,</span>
            <span class="s1">&#39;calibration_difference&#39;</span><span class="p">:</span> <span class="n">calibration_difference</span><span class="p">,</span>
            <span class="s1">&#39;is_fair&#39;</span><span class="p">:</span> <span class="n">calibration_difference</span> <span class="o">&lt;</span> <span class="mf">0.05</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">comprehensive_fairness_evaluation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y_true</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
                                        <span class="n">y_prob</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">protected_attr</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Perform comprehensive fairness evaluation across multiple metrics&quot;&quot;&quot;</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;demographic_parity&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_demographic_parity</span><span class="p">(</span><span class="n">y_pred</span><span class="p">,</span> <span class="n">protected_attr</span><span class="p">),</span>
            <span class="s1">&#39;equalized_odds&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_equalized_odds</span><span class="p">(</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">protected_attr</span><span class="p">),</span>
            <span class="s1">&#39;calibration&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_calibration_metrics</span><span class="p">(</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_prob</span><span class="p">,</span> <span class="n">protected_attr</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="c1"># Overall fairness assessment</span>
        <span class="n">fairness_scores</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">evaluation</span><span class="p">[</span><span class="s1">&#39;demographic_parity&#39;</span><span class="p">][</span><span class="s1">&#39;is_fair&#39;</span><span class="p">],</span>
            <span class="n">evaluation</span><span class="p">[</span><span class="s1">&#39;equalized_odds&#39;</span><span class="p">][</span><span class="s1">&#39;is_fair&#39;</span><span class="p">],</span>
            <span class="n">evaluation</span><span class="p">[</span><span class="s1">&#39;calibration&#39;</span><span class="p">][</span><span class="s1">&#39;is_fair&#39;</span><span class="p">]</span>
        <span class="p">]</span>

        <span class="n">evaluation</span><span class="p">[</span><span class="s1">&#39;overall_assessment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;fair_metrics_count&#39;</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">fairness_scores</span><span class="p">),</span>
            <span class="s1">&#39;total_metrics&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">fairness_scores</span><span class="p">),</span>
            <span class="s1">&#39;overall_fair&#39;</span><span class="p">:</span> <span class="nb">all</span><span class="p">(</span><span class="n">fairness_scores</span><span class="p">),</span>
            <span class="s1">&#39;fairness_percentage&#39;</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">fairness_scores</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">fairness_scores</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">evaluation</span>

<span class="c1"># Demonstration function for mitigation strategies</span>
<span class="k">def</span><span class="w"> </span><span class="nf">demonstrate_bias_mitigation_strategies</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Demonstrate comprehensive bias mitigation strategies&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Bias Mitigation Strategies Demonstration ===</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Create biased synthetic dataset</span>
    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
    <span class="n">n_samples</span> <span class="o">=</span> <span class="mi">1000</span>

    <span class="c1"># Biased gender distribution (70% male, 30% female)</span>
    <span class="n">gender</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">],</span> <span class="n">n_samples</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>

    <span class="c1"># Biased outcomes (males more likely to get positive outcomes)</span>
    <span class="n">base_prob</span> <span class="o">=</span> <span class="mf">0.3</span>
    <span class="n">prob_adjustment</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">gender</span> <span class="o">==</span> <span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">)</span>
    <span class="n">outcomes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">binomial</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">base_prob</span> <span class="o">+</span> <span class="n">prob_adjustment</span><span class="p">,</span> <span class="n">n_samples</span><span class="p">)</span>

    <span class="c1"># Features</span>
    <span class="n">features</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">n_samples</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

    <span class="n">dataset</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
        <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="n">gender</span><span class="p">,</span>
        <span class="s1">&#39;outcome&#39;</span><span class="p">:</span> <span class="n">outcomes</span><span class="p">,</span>
        <span class="s1">&#39;feature1&#39;</span><span class="p">:</span> <span class="n">features</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span>
        <span class="s1">&#39;feature2&#39;</span><span class="p">:</span> <span class="n">features</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span>
        <span class="s1">&#39;feature3&#39;</span><span class="p">:</span> <span class="n">features</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
    <span class="p">})</span>

    <span class="c1"># 1. Diverse Data Collection Framework</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1. Diverse Data Collection Analysis:&quot;</span><span class="p">)</span>
    <span class="n">collection_framework</span> <span class="o">=</span> <span class="n">DiverseDataCollectionFramework</span><span class="p">()</span>

    <span class="n">target_distribution</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;M&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">}}</span>
    <span class="n">diversity_score</span> <span class="o">=</span> <span class="n">collection_framework</span><span class="o">.</span><span class="n">calculate_diversity_score</span><span class="p">(</span>
        <span class="n">dataset</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">],</span> <span class="n">target_distribution</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Current diversity score: </span><span class="si">{</span><span class="n">diversity_score</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">collection_plan</span> <span class="o">=</span> <span class="n">collection_framework</span><span class="o">.</span><span class="n">design_stratified_collection</span><span class="p">(</span>
        <span class="n">target_distribution</span><span class="p">,</span> <span class="mi">1000</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Collection strategy: </span><span class="si">{</span><span class="n">collection_plan</span><span class="p">[</span><span class="s1">&#39;strategy&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Target strata: </span><span class="si">{</span><span class="n">collection_plan</span><span class="p">[</span><span class="s1">&#39;strata_targets&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>

    <span class="c1"># 2. Bias Reweighting Framework</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;2. Bias Reweighting:&quot;</span><span class="p">)</span>
    <span class="n">reweighting_framework</span> <span class="o">=</span> <span class="n">BiasReweightingFramework</span><span class="p">()</span>

    <span class="c1"># Calculate inverse propensity weights</span>
    <span class="n">ipw_weights</span> <span class="o">=</span> <span class="n">reweighting_framework</span><span class="o">.</span><span class="n">calculate_inverse_propensity_weights</span><span class="p">(</span>
        <span class="n">dataset</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Inverse propensity weights - Mean: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">ipw_weights</span><span class="p">)</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">, Std: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">ipw_weights</span><span class="p">)</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Calculate fairness constraint weights</span>
    <span class="n">protected_attr_numeric</span> <span class="o">=</span> <span class="p">(</span><span class="n">dataset</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">fairness_weights</span> <span class="o">=</span> <span class="n">reweighting_framework</span><span class="o">.</span><span class="n">apply_fairness_constraints_reweighting</span><span class="p">(</span>
        <span class="n">features</span><span class="p">,</span> <span class="n">outcomes</span><span class="p">,</span> <span class="n">protected_attr_numeric</span><span class="p">,</span> <span class="s1">&#39;demographic_parity&#39;</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Fairness constraint weights - Mean: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">fairness_weights</span><span class="p">)</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">, Std: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">fairness_weights</span><span class="p">)</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>

    <span class="c1"># 3. Fairness-Aware Metrics</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;3. Fairness-Aware Metrics:&quot;</span><span class="p">)</span>
    <span class="n">fairness_metrics</span> <span class="o">=</span> <span class="n">FairnessAwareMetrics</span><span class="p">()</span>

    <span class="c1"># Train simple model for evaluation</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.linear_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogisticRegression</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">outcomes</span><span class="p">)</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">features</span><span class="p">)</span>
    <span class="n">y_prob</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">features</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>

    <span class="c1"># Evaluate fairness</span>
    <span class="n">fairness_eval</span> <span class="o">=</span> <span class="n">fairness_metrics</span><span class="o">.</span><span class="n">comprehensive_fairness_evaluation</span><span class="p">(</span>
        <span class="n">outcomes</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">y_prob</span><span class="p">,</span> <span class="n">protected_attr_numeric</span>
    <span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Demographic Parity - Fair: </span><span class="si">{</span><span class="n">fairness_eval</span><span class="p">[</span><span class="s1">&#39;demographic_parity&#39;</span><span class="p">][</span><span class="s1">&#39;is_fair&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Parity Difference: </span><span class="si">{</span><span class="n">fairness_eval</span><span class="p">[</span><span class="s1">&#39;demographic_parity&#39;</span><span class="p">][</span><span class="s1">&#39;parity_difference&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Equalized Odds - Fair: </span><span class="si">{</span><span class="n">fairness_eval</span><span class="p">[</span><span class="s1">&#39;equalized_odds&#39;</span><span class="p">][</span><span class="s1">&#39;is_fair&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Overall Fairness: </span><span class="si">{</span><span class="n">fairness_eval</span><span class="p">[</span><span class="s1">&#39;overall_assessment&#39;</span><span class="p">][</span><span class="s1">&#39;fairness_percentage&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">demonstrate_bias_mitigation_strategies</span><span class="p">()</span>
</code></pre>
</div>
<h2 id="part-4-transparency-and-accountability-tools">Part 4: Transparency and Accountability Tools<a class="headerlink" href="#part-4-transparency-and-accountability-tools" title="Permanent link">&para;</a></h2>
<p>This section implements comprehensive frameworks for documentation, model cards, and reproducibility checks to ensure transparency in bias mitigation efforts.</p>
<div class="highlight python-template" data-fence-type="template" data-language="python">
<pre><code class="language-python"><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">hashlib</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pickle</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ModelCardGenerator</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Framework for generating comprehensive model cards for bias transparency&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_template</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;model_details&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;intended_use&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;factors&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;metrics&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;evaluation_data&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;training_data&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;quantitative_analyses&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;ethical_considerations&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;caveats_and_recommendations&#39;</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_model_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_info</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">training_data_info</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span>
                         <span class="n">evaluation_results</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">bias_analysis</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create comprehensive model card including bias analysis</span>

<span class="sd">        Args:</span>
<span class="sd">            model_info: Basic model information</span>
<span class="sd">            training_data_info: Training data characteristics</span>
<span class="sd">            evaluation_results: Model evaluation metrics</span>
<span class="sd">            bias_analysis: Bias assessment results</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model_card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">card_template</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="c1"># Model Details</span>
        <span class="n">model_card</span><span class="p">[</span><span class="s1">&#39;model_details&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">model_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Unnamed Model&#39;</span><span class="p">),</span>
            <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="n">model_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;1.0&#39;</span><span class="p">),</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">model_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;Classification&#39;</span><span class="p">),</span>
            <span class="s1">&#39;architecture&#39;</span><span class="p">:</span> <span class="n">model_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;architecture&#39;</span><span class="p">,</span> <span class="s1">&#39;Not specified&#39;</span><span class="p">),</span>
            <span class="s1">&#39;paper_or_resources&#39;</span><span class="p">:</span> <span class="n">model_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;references&#39;</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="s1">&#39;license&#39;</span><span class="p">:</span> <span class="n">model_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;license&#39;</span><span class="p">,</span> <span class="s1">&#39;Not specified&#39;</span><span class="p">),</span>
            <span class="s1">&#39;feedback&#39;</span><span class="p">:</span> <span class="n">model_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;contact&#39;</span><span class="p">,</span> <span class="s1">&#39;Not provided&#39;</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="c1"># Intended Use</span>
        <span class="n">model_card</span><span class="p">[</span><span class="s1">&#39;intended_use&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;primary_intended_uses&#39;</span><span class="p">:</span> <span class="n">model_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;intended_uses&#39;</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="s1">&#39;primary_intended_users&#39;</span><span class="p">:</span> <span class="n">model_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;intended_users&#39;</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="s1">&#39;out_of_scope_use_cases&#39;</span><span class="p">:</span> <span class="n">model_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;out_of_scope&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">}</span>

        <span class="c1"># Factors (bias-relevant demographics and other factors)</span>
        <span class="n">model_card</span><span class="p">[</span><span class="s1">&#39;factors&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;relevant_factors&#39;</span><span class="p">:</span> <span class="n">training_data_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;demographic_factors&#39;</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="s1">&#39;evaluation_factors&#39;</span><span class="p">:</span> <span class="n">bias_analysis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;analyzed_factors&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">}</span>

        <span class="c1"># Metrics</span>
        <span class="n">model_card</span><span class="p">[</span><span class="s1">&#39;metrics&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;model_performance_measures&#39;</span><span class="p">:</span> <span class="n">evaluation_results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;performance_metrics&#39;</span><span class="p">,</span> <span class="p">{}),</span>
            <span class="s1">&#39;decision_thresholds&#39;</span><span class="p">:</span> <span class="n">evaluation_results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;thresholds&#39;</span><span class="p">,</span> <span class="p">{}),</span>
            <span class="s1">&#39;variation_approaches&#39;</span><span class="p">:</span> <span class="n">evaluation_results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;variation_analysis&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="p">}</span>

        <span class="c1"># Training Data</span>
        <span class="n">model_card</span><span class="p">[</span><span class="s1">&#39;training_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;dataset_name&#39;</span><span class="p">:</span> <span class="n">training_data_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Not specified&#39;</span><span class="p">),</span>
            <span class="s1">&#39;data_collection_method&#39;</span><span class="p">:</span> <span class="n">training_data_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;collection_method&#39;</span><span class="p">,</span> <span class="s1">&#39;Not specified&#39;</span><span class="p">),</span>
            <span class="s1">&#39;data_preprocessing&#39;</span><span class="p">:</span> <span class="n">training_data_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;preprocessing_steps&#39;</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="s1">&#39;demographic_distribution&#39;</span><span class="p">:</span> <span class="n">training_data_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;demographic_distribution&#39;</span><span class="p">,</span> <span class="p">{}),</span>
            <span class="s1">&#39;bias_mitigation_applied&#39;</span><span class="p">:</span> <span class="n">training_data_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;bias_mitigation&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">}</span>

        <span class="c1"># Quantitative Analyses (bias-focused)</span>
        <span class="n">model_card</span><span class="p">[</span><span class="s1">&#39;quantitative_analyses&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;unitary_results&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_bias_results</span><span class="p">(</span><span class="n">bias_analysis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;overall_metrics&#39;</span><span class="p">,</span> <span class="p">{})),</span>
            <span class="s1">&#39;intersectional_results&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format_intersectional_analysis</span><span class="p">(</span>
                <span class="n">bias_analysis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;intersectional_analysis&#39;</span><span class="p">,</span> <span class="p">{})</span>
            <span class="p">)</span>
        <span class="p">}</span>

        <span class="c1"># Ethical Considerations</span>
        <span class="n">model_card</span><span class="p">[</span><span class="s1">&#39;ethical_considerations&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;sensitive_data&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_identify_sensitive_data_usage</span><span class="p">(</span><span class="n">training_data_info</span><span class="p">),</span>
            <span class="s1">&#39;human_life_impact&#39;</span><span class="p">:</span> <span class="n">model_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;human_impact_assessment&#39;</span><span class="p">,</span> <span class="s1">&#39;Not assessed&#39;</span><span class="p">),</span>
            <span class="s1">&#39;mitigations&#39;</span><span class="p">:</span> <span class="n">bias_analysis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mitigation_strategies&#39;</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="s1">&#39;risks_and_harms&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assess_potential_harms</span><span class="p">(</span><span class="n">bias_analysis</span><span class="p">),</span>
            <span class="s1">&#39;use_cases_to_avoid&#39;</span><span class="p">:</span> <span class="n">model_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;prohibited_uses&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">}</span>

        <span class="c1"># Caveats and Recommendations</span>
        <span class="n">model_card</span><span class="p">[</span><span class="s1">&#39;caveats_and_recommendations&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;caveats&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_bias_caveats</span><span class="p">(</span><span class="n">bias_analysis</span><span class="p">),</span>
            <span class="s1">&#39;recommendations&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_usage_recommendations</span><span class="p">(</span><span class="n">bias_analysis</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">model_card</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_format_bias_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bias_metrics</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Format bias analysis results for model card&quot;&quot;&quot;</span>
        <span class="n">formatted_results</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">metric_name</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">bias_metrics</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">formatted_results</span><span class="p">[</span><span class="n">metric_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;Not calculated&#39;</span><span class="p">),</span>
                    <span class="s1">&#39;threshold&#39;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;threshold&#39;</span><span class="p">,</span> <span class="s1">&#39;Not specified&#39;</span><span class="p">),</span>
                    <span class="s1">&#39;interpretation&#39;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;interpretation&#39;</span><span class="p">,</span> <span class="s1">&#39;See documentation&#39;</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">formatted_results</span><span class="p">[</span><span class="n">metric_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">result</span><span class="p">}</span>

        <span class="k">return</span> <span class="n">formatted_results</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_format_intersectional_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">intersectional_data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Format intersectional bias analysis for model card&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">intersectional_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Not performed&#39;</span><span class="p">}</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;combinations_analyzed&#39;</span><span class="p">:</span> <span class="n">intersectional_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;combinations&#39;</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="s1">&#39;significant_disparities&#39;</span><span class="p">:</span> <span class="n">intersectional_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;disparities&#39;</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="s1">&#39;recommendations&#39;</span><span class="p">:</span> <span class="n">intersectional_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;recommendations&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_identify_sensitive_data_usage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">training_data_info</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Identify sensitive data elements used in training&quot;&quot;&quot;</span>
        <span class="n">sensitive_indicators</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">demographic_factors</span> <span class="o">=</span> <span class="n">training_data_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;demographic_factors&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">sensitive_attributes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;race&#39;</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;religion&#39;</span><span class="p">,</span> <span class="s1">&#39;sexual_orientation&#39;</span><span class="p">,</span> <span class="s1">&#39;disability&#39;</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">sensitive_attributes</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">attr</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">factor</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">factor</span> <span class="ow">in</span> <span class="n">demographic_factors</span><span class="p">):</span>
                <span class="n">sensitive_indicators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">sensitive_indicators</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_assess_potential_harms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bias_analysis</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Assess potential harms based on bias analysis&quot;&quot;&quot;</span>
        <span class="n">potential_harms</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">severity</span> <span class="o">=</span> <span class="n">bias_analysis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;overall_severity&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">severity</span> <span class="o">&gt;</span> <span class="mf">0.7</span><span class="p">:</span>
            <span class="n">potential_harms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;High risk of discriminatory outcomes&#39;</span><span class="p">)</span>
            <span class="n">potential_harms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;May perpetuate or amplify existing social inequalities&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">severity</span> <span class="o">&gt;</span> <span class="mf">0.4</span><span class="p">:</span>
            <span class="n">potential_harms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Moderate risk of biased decisions&#39;</span><span class="p">)</span>
            <span class="n">potential_harms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Potential for unfair treatment of certain groups&#39;</span><span class="p">)</span>

        <span class="n">affected_groups</span> <span class="o">=</span> <span class="n">bias_analysis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;affected_groups&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">if</span> <span class="n">affected_groups</span><span class="p">:</span>
            <span class="n">potential_harms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Particularly affects: </span><span class="si">{</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">affected_groups</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">potential_harms</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_bias_caveats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bias_analysis</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate caveats based on bias analysis&quot;&quot;&quot;</span>
        <span class="n">caveats</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">bias_analysis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;data_limitations&#39;</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="n">caveats</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Model trained on data with known representational limitations&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">bias_analysis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;temporal_considerations&#39;</span><span class="p">,</span> <span class="p">{}):</span>
            <span class="n">caveats</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Model performance may degrade over time due to population drift&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">bias_analysis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;geographic_limitations&#39;</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="n">caveats</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Model may not generalize to different geographic regions&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">caveats</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_usage_recommendations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bias_analysis</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate usage recommendations based on bias analysis&quot;&quot;&quot;</span>
        <span class="n">recommendations</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">bias_analysis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;monitoring_needs&#39;</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="n">recommendations</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">bias_analysis</span><span class="p">[</span><span class="s1">&#39;monitoring_needs&#39;</span><span class="p">])</span>

        <span class="n">recommendations</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
            <span class="s1">&#39;Regular bias assessment in deployment environment&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Human oversight for high-stakes decisions&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Periodic retraining with updated, representative data&#39;</span>
        <span class="p">])</span>

        <span class="k">return</span> <span class="n">recommendations</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">export_model_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_card</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">format_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span>
                         <span class="n">filepath</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Export model card in specified format&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">format_type</span> <span class="o">==</span> <span class="s1">&#39;json&#39;</span><span class="p">:</span>
            <span class="n">card_str</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">model_card</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">format_type</span> <span class="o">==</span> <span class="s1">&#39;markdown&#39;</span><span class="p">:</span>
            <span class="n">card_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_to_markdown</span><span class="p">(</span><span class="n">model_card</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported format: </span><span class="si">{</span><span class="n">format_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">filepath</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">card_str</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">card_str</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_convert_to_markdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_card</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert model card to markdown format&quot;&quot;&quot;</span>
        <span class="n">markdown_sections</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;# Model Card</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">section_name</span><span class="p">,</span> <span class="n">section_content</span> <span class="ow">in</span> <span class="n">model_card</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">section_title</span> <span class="o">=</span> <span class="n">section_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>
            <span class="n">markdown_sections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">## </span><span class="si">{</span><span class="n">section_title</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">section_content</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">section_content</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">item_title</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>
                    <span class="n">markdown_sections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">### </span><span class="si">{</span><span class="n">item_title</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                            <span class="n">markdown_sections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;- </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                        <span class="k">for</span> <span class="n">subkey</span><span class="p">,</span> <span class="n">subvalue</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                            <span class="n">markdown_sections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;**</span><span class="si">{</span><span class="n">subkey</span><span class="si">}</span><span class="s2">**: </span><span class="si">{</span><span class="n">subvalue</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">markdown_sections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">markdown_sections</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BiasDocumentationFramework</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Framework for comprehensive bias documentation and audit trails&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">documentation_log</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">audit_trail</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">document_bias_assessment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">assessment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">assessment_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                <span class="n">methodology</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">results</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> 
                                <span class="n">decisions_made</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Document a bias assessment with full methodology and results</span>

<span class="sd">        Args:</span>
<span class="sd">            assessment_id: Unique identifier for the assessment</span>
<span class="sd">            assessment_type: Type of bias assessment performed</span>
<span class="sd">            methodology: Detailed methodology used</span>
<span class="sd">            results: Assessment results</span>
<span class="sd">            decisions_made: Decisions made based on results</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">documentation</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;assessment_id&#39;</span><span class="p">:</span> <span class="n">assessment_id</span><span class="p">,</span>
            <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
            <span class="s1">&#39;assessment_type&#39;</span><span class="p">:</span> <span class="n">assessment_type</span><span class="p">,</span>
            <span class="s1">&#39;methodology&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;approach&#39;</span><span class="p">:</span> <span class="n">methodology</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;approach&#39;</span><span class="p">,</span> <span class="s1">&#39;Not specified&#39;</span><span class="p">),</span>
                <span class="s1">&#39;tools_used&#39;</span><span class="p">:</span> <span class="n">methodology</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tools&#39;</span><span class="p">,</span> <span class="p">[]),</span>
                <span class="s1">&#39;data_sources&#39;</span><span class="p">:</span> <span class="n">methodology</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;data_sources&#39;</span><span class="p">,</span> <span class="p">[]),</span>
                <span class="s1">&#39;evaluation_criteria&#39;</span><span class="p">:</span> <span class="n">methodology</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;criteria&#39;</span><span class="p">,</span> <span class="p">[]),</span>
                <span class="s1">&#39;assumptions&#39;</span><span class="p">:</span> <span class="n">methodology</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;assumptions&#39;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="p">},</span>
            <span class="s1">&#39;results&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;summary&#39;</span><span class="p">:</span> <span class="n">results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;summary&#39;</span><span class="p">,</span> <span class="s1">&#39;Not provided&#39;</span><span class="p">),</span>
                <span class="s1">&#39;detailed_findings&#39;</span><span class="p">:</span> <span class="n">results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detailed_findings&#39;</span><span class="p">,</span> <span class="p">{}),</span>
                <span class="s1">&#39;severity_assessment&#39;</span><span class="p">:</span> <span class="n">results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;severity&#39;</span><span class="p">,</span> <span class="s1">&#39;Not assessed&#39;</span><span class="p">),</span>
                <span class="s1">&#39;affected_groups&#39;</span><span class="p">:</span> <span class="n">results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;affected_groups&#39;</span><span class="p">,</span> <span class="p">[]),</span>
                <span class="s1">&#39;confidence_level&#39;</span><span class="p">:</span> <span class="n">results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;confidence&#39;</span><span class="p">,</span> <span class="s1">&#39;Not specified&#39;</span><span class="p">)</span>
            <span class="p">},</span>
            <span class="s1">&#39;decisions_and_actions&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;immediate_decisions&#39;</span><span class="p">:</span> <span class="n">decisions_made</span><span class="p">,</span>
                <span class="s1">&#39;mitigation_actions&#39;</span><span class="p">:</span> <span class="n">results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mitigation_actions&#39;</span><span class="p">,</span> <span class="p">[]),</span>
                <span class="s1">&#39;follow_up_required&#39;</span><span class="p">:</span> <span class="n">results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;follow_up&#39;</span><span class="p">,</span> <span class="p">[]),</span>
                <span class="s1">&#39;approval_status&#39;</span><span class="p">:</span> <span class="s1">&#39;Pending Review&#39;</span>
            <span class="p">},</span>
            <span class="s1">&#39;review_and_validation&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;peer_reviewed&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;stakeholder_consulted&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;external_audit&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;review_comments&#39;</span><span class="p">:</span> <span class="p">[]</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">documentation_log</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">documentation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_audit_trail</span><span class="p">(</span><span class="s1">&#39;bias_assessment_documented&#39;</span><span class="p">,</span> <span class="n">assessment_id</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">documentation</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">document_mitigation_implementation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mitigation_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                         <span class="n">mitigation_strategy</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span>
                                         <span class="n">implementation_details</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span>
                                         <span class="n">effectiveness_metrics</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Document bias mitigation implementation and effectiveness</span>

<span class="sd">        Args:</span>
<span class="sd">            mitigation_id: Unique identifier for mitigation effort</span>
<span class="sd">            mitigation_strategy: Strategy being implemented</span>
<span class="sd">            implementation_details: How the strategy was implemented</span>
<span class="sd">            effectiveness_metrics: Metrics showing effectiveness</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mitigation_doc</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;mitigation_id&#39;</span><span class="p">:</span> <span class="n">mitigation_id</span><span class="p">,</span>
            <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
            <span class="s1">&#39;strategy&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">mitigation_strategy</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Unnamed Strategy&#39;</span><span class="p">),</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">mitigation_strategy</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;Not specified&#39;</span><span class="p">),</span>
                <span class="s1">&#39;target_bias&#39;</span><span class="p">:</span> <span class="n">mitigation_strategy</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;target_bias&#39;</span><span class="p">,</span> <span class="p">[]),</span>
                <span class="s1">&#39;expected_outcomes&#39;</span><span class="p">:</span> <span class="n">mitigation_strategy</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;expected_outcomes&#39;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="p">},</span>
            <span class="s1">&#39;implementation&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;start_date&#39;</span><span class="p">:</span> <span class="n">implementation_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;start_date&#39;</span><span class="p">,</span> <span class="s1">&#39;Not specified&#39;</span><span class="p">),</span>
                <span class="s1">&#39;completion_date&#39;</span><span class="p">:</span> <span class="n">implementation_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;completion_date&#39;</span><span class="p">,</span> <span class="s1">&#39;Ongoing&#39;</span><span class="p">),</span>
                <span class="s1">&#39;implementation_steps&#39;</span><span class="p">:</span> <span class="n">implementation_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;steps&#39;</span><span class="p">,</span> <span class="p">[]),</span>
                <span class="s1">&#39;resources_used&#39;</span><span class="p">:</span> <span class="n">implementation_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;resources&#39;</span><span class="p">,</span> <span class="p">[]),</span>
                <span class="s1">&#39;challenges_encountered&#39;</span><span class="p">:</span> <span class="n">implementation_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;challenges&#39;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="p">},</span>
            <span class="s1">&#39;effectiveness_evaluation&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;metrics_used&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">effectiveness_metrics</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>
                <span class="s1">&#39;baseline_values&#39;</span><span class="p">:</span> <span class="n">effectiveness_metrics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;baseline&#39;</span><span class="p">,</span> <span class="p">{}),</span>
                <span class="s1">&#39;post_mitigation_values&#39;</span><span class="p">:</span> <span class="n">effectiveness_metrics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;post_mitigation&#39;</span><span class="p">,</span> <span class="p">{}),</span>
                <span class="s1">&#39;improvement_achieved&#39;</span><span class="p">:</span> <span class="n">effectiveness_metrics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;improvement&#39;</span><span class="p">,</span> <span class="p">{}),</span>
                <span class="s1">&#39;success_criteria_met&#39;</span><span class="p">:</span> <span class="n">effectiveness_metrics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;success_criteria_met&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="p">},</span>
            <span class="s1">&#39;lessons_learned&#39;</span><span class="p">:</span> <span class="n">implementation_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;lessons_learned&#39;</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="s1">&#39;recommendations&#39;</span><span class="p">:</span> <span class="n">implementation_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;recommendations&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">documentation_log</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mitigation_doc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_audit_trail</span><span class="p">(</span><span class="s1">&#39;mitigation_implemented&#39;</span><span class="p">,</span> <span class="n">mitigation_id</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">mitigation_doc</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_update_audit_trail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">details</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update audit trail with action&quot;&quot;&quot;</span>
        <span class="n">audit_entry</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
            <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="n">action</span><span class="p">,</span>
            <span class="s1">&#39;entity_id&#39;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">,</span>
            <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="n">details</span><span class="p">,</span>
            <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="s1">&#39;system&#39;</span>  <span class="c1"># In practice, would capture actual user</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">audit_trail</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">audit_entry</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate_compliance_report</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compliance_framework</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;general&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate compliance report for bias management&quot;&quot;&quot;</span>
        <span class="n">assessments_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">([</span><span class="n">doc</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">documentation_log</span> 
                               <span class="k">if</span> <span class="s1">&#39;assessment_type&#39;</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">])</span>
        <span class="n">mitigations_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">([</span><span class="n">doc</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">documentation_log</span> 
                               <span class="k">if</span> <span class="s1">&#39;strategy&#39;</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">])</span>

        <span class="n">compliance_report</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;report_date&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
            <span class="s1">&#39;compliance_framework&#39;</span><span class="p">:</span> <span class="n">compliance_framework</span><span class="p">,</span>
            <span class="s1">&#39;summary_statistics&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;total_bias_assessments&#39;</span><span class="p">:</span> <span class="n">assessments_count</span><span class="p">,</span>
                <span class="s1">&#39;total_mitigation_efforts&#39;</span><span class="p">:</span> <span class="n">mitigations_count</span><span class="p">,</span>
                <span class="s1">&#39;documentation_completeness&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assess_documentation_completeness</span><span class="p">(),</span>
                <span class="s1">&#39;audit_trail_entries&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">audit_trail</span><span class="p">)</span>
            <span class="p">},</span>
            <span class="s1">&#39;compliance_checklist&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_compliance_checklist</span><span class="p">(),</span>
            <span class="s1">&#39;recommendations&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_compliance_recommendations</span><span class="p">(),</span>
            <span class="s1">&#39;next_review_date&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_next_review_date</span><span class="p">()</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">compliance_report</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_assess_documentation_completeness</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Assess completeness of bias documentation&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">documentation_log</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="n">required_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;methodology&#39;</span><span class="p">,</span> <span class="s1">&#39;results&#39;</span><span class="p">,</span> <span class="s1">&#39;decisions_and_actions&#39;</span><span class="p">]</span>
        <span class="n">complete_docs</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">documentation_log</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">field</span> <span class="ow">in</span> <span class="n">doc</span> <span class="ow">and</span> <span class="n">doc</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">required_fields</span><span class="p">):</span>
                <span class="n">complete_docs</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">complete_docs</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">documentation_log</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_compliance_checklist</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate compliance checklist&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;bias_assessment_conducted&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">([</span><span class="n">doc</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">documentation_log</span> <span class="k">if</span> <span class="s1">&#39;assessment_type&#39;</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;mitigation_strategies_documented&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">([</span><span class="n">doc</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">documentation_log</span> <span class="k">if</span> <span class="s1">&#39;strategy&#39;</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;effectiveness_measured&#39;</span><span class="p">:</span> <span class="nb">any</span><span class="p">(</span><span class="s1">&#39;effectiveness_evaluation&#39;</span> <span class="ow">in</span> <span class="n">doc</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">documentation_log</span><span class="p">),</span>
            <span class="s1">&#39;audit_trail_maintained&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">audit_trail</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;regular_reviews_scheduled&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># Would check actual schedule</span>
            <span class="s1">&#39;stakeholder_involvement_documented&#39;</span><span class="p">:</span> <span class="nb">any</span><span class="p">(</span>
                <span class="n">doc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;review_and_validation&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;stakeholder_consulted&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">documentation_log</span>
            <span class="p">)</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_compliance_recommendations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate recommendations for compliance improvement&quot;&quot;&quot;</span>
        <span class="n">recommendations</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assess_documentation_completeness</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.8</span><span class="p">:</span>
            <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Improve documentation completeness&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="s1">&#39;external_audit&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">documentation_log</span><span class="p">):</span>
            <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Consider external bias audit&quot;</span><span class="p">)</span>

        <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Establish regular bias assessment schedule&quot;</span><span class="p">)</span>
        <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Implement continuous monitoring system&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">recommendations</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_calculate_next_review_date</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate next recommended review date&quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">timedelta</span>
        <span class="n">next_review</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>  <span class="c1"># Quarterly reviews</span>
        <span class="k">return</span> <span class="n">next_review</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ReproducibilityChecker</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Framework for ensuring reproducibility of bias assessments and mitigations&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reproducibility_log</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version_registry</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_reproducibility_package</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                     <span class="n">code_files</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
                                     <span class="n">data_description</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span>
                                     <span class="n">environment_info</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span>
                                     <span class="n">results</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create reproducibility package for bias assessment/mitigation</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment_id: Unique identifier for the experiment</span>
<span class="sd">            code_files: List of code files used</span>
<span class="sd">            data_description: Description of data used</span>
<span class="sd">            environment_info: Environment and dependency information</span>
<span class="sd">            results: Results to be reproduced</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">package</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;experiment_id&#39;</span><span class="p">:</span> <span class="n">experiment_id</span><span class="p">,</span>
            <span class="s1">&#39;creation_date&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
            <span class="s1">&#39;code_artifacts&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;files&#39;</span><span class="p">:</span> <span class="n">code_files</span><span class="p">,</span>
                <span class="s1">&#39;main_script&#39;</span><span class="p">:</span> <span class="n">code_files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">code_files</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;code_hash&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_code_hash</span><span class="p">(</span><span class="n">code_files</span><span class="p">),</span>
                <span class="s1">&#39;version_control_info&#39;</span><span class="p">:</span> <span class="n">environment_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;git_commit&#39;</span><span class="p">,</span> <span class="s1">&#39;Not tracked&#39;</span><span class="p">)</span>
            <span class="p">},</span>
            <span class="s1">&#39;data_artifacts&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="n">data_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">,</span> <span class="s1">&#39;Not provided&#39;</span><span class="p">),</span>
                <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="n">data_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="s1">&#39;Not specified&#39;</span><span class="p">),</span>
                <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="n">data_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;Not versioned&#39;</span><span class="p">),</span>
                <span class="s1">&#39;preprocessing_steps&#39;</span><span class="p">:</span> <span class="n">data_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;preprocessing&#39;</span><span class="p">,</span> <span class="p">[]),</span>
                <span class="s1">&#39;data_hash&#39;</span><span class="p">:</span> <span class="n">data_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;hash&#39;</span><span class="p">,</span> <span class="s1">&#39;Not calculated&#39;</span><span class="p">)</span>
            <span class="p">},</span>
            <span class="s1">&#39;environment&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;python_version&#39;</span><span class="p">:</span> <span class="n">environment_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;python_version&#39;</span><span class="p">,</span> <span class="s1">&#39;Not specified&#39;</span><span class="p">),</span>
                <span class="s1">&#39;packages&#39;</span><span class="p">:</span> <span class="n">environment_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;packages&#39;</span><span class="p">,</span> <span class="p">{}),</span>
                <span class="s1">&#39;hardware&#39;</span><span class="p">:</span> <span class="n">environment_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;hardware&#39;</span><span class="p">,</span> <span class="s1">&#39;Not specified&#39;</span><span class="p">),</span>
                <span class="s1">&#39;random_seeds&#39;</span><span class="p">:</span> <span class="n">environment_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;random_seeds&#39;</span><span class="p">,</span> <span class="p">{})</span>
            <span class="p">},</span>
            <span class="s1">&#39;expected_results&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;primary_metrics&#39;</span><span class="p">:</span> <span class="n">results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;primary_metrics&#39;</span><span class="p">,</span> <span class="p">{}),</span>
                <span class="s1">&#39;secondary_metrics&#39;</span><span class="p">:</span> <span class="n">results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;secondary_metrics&#39;</span><span class="p">,</span> <span class="p">{}),</span>
                <span class="s1">&#39;result_format&#39;</span><span class="p">:</span> <span class="n">results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;format&#39;</span><span class="p">,</span> <span class="s1">&#39;Not specified&#39;</span><span class="p">),</span>
                <span class="s1">&#39;tolerance_levels&#39;</span><span class="p">:</span> <span class="n">results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tolerance&#39;</span><span class="p">,</span> <span class="p">{})</span>
            <span class="p">},</span>
            <span class="s1">&#39;reproduction_instructions&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_reproduction_instructions</span><span class="p">(</span>
                <span class="n">code_files</span><span class="p">,</span> <span class="n">data_description</span><span class="p">,</span> <span class="n">environment_info</span>
            <span class="p">)</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">reproducibility_log</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">package</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_register_version</span><span class="p">(</span><span class="n">experiment_id</span><span class="p">,</span> <span class="n">package</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">package</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">verify_reproducibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
                             <span class="n">reproduction_results</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Verify reproducibility by comparing reproduction results with original</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment_id: ID of experiment to verify</span>
<span class="sd">            reproduction_results: Results from reproduction attempt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">original_package</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">reproducibility_log</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">package</span><span class="p">[</span><span class="s1">&#39;experiment_id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">experiment_id</span><span class="p">:</span>
                <span class="n">original_package</span> <span class="o">=</span> <span class="n">package</span>
                <span class="k">break</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">original_package</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Original experiment not found&#39;</span><span class="p">}</span>

        <span class="n">verification_result</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;experiment_id&#39;</span><span class="p">:</span> <span class="n">experiment_id</span><span class="p">,</span>
            <span class="s1">&#39;verification_date&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
            <span class="s1">&#39;original_results&#39;</span><span class="p">:</span> <span class="n">original_package</span><span class="p">[</span><span class="s1">&#39;expected_results&#39;</span><span class="p">],</span>
            <span class="s1">&#39;reproduction_results&#39;</span><span class="p">:</span> <span class="n">reproduction_results</span><span class="p">,</span>
            <span class="s1">&#39;comparison&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;overall_status&#39;</span><span class="p">:</span> <span class="s1">&#39;unknown&#39;</span>
        <span class="p">}</span>

        <span class="c1"># Compare primary metrics</span>
        <span class="n">primary_comparison</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compare_metrics</span><span class="p">(</span>
            <span class="n">original_package</span><span class="p">[</span><span class="s1">&#39;expected_results&#39;</span><span class="p">][</span><span class="s1">&#39;primary_metrics&#39;</span><span class="p">],</span>
            <span class="n">reproduction_results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;primary_metrics&#39;</span><span class="p">,</span> <span class="p">{}),</span>
            <span class="n">original_package</span><span class="p">[</span><span class="s1">&#39;expected_results&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tolerance_levels&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="p">)</span>

        <span class="n">verification_result</span><span class="p">[</span><span class="s1">&#39;comparison&#39;</span><span class="p">][</span><span class="s1">&#39;primary_metrics&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">primary_comparison</span>

        <span class="c1"># Determine overall status</span>
        <span class="k">if</span> <span class="n">primary_comparison</span><span class="p">[</span><span class="s1">&#39;all_within_tolerance&#39;</span><span class="p">]:</span>
            <span class="n">verification_result</span><span class="p">[</span><span class="s1">&#39;overall_status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;reproducible&#39;</span>
        <span class="k">elif</span> <span class="n">primary_comparison</span><span class="p">[</span><span class="s1">&#39;some_within_tolerance&#39;</span><span class="p">]:</span>
            <span class="n">verification_result</span><span class="p">[</span><span class="s1">&#39;overall_status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;partially_reproducible&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">verification_result</span><span class="p">[</span><span class="s1">&#39;overall_status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;not_reproducible&#39;</span>

        <span class="c1"># Add recommendations</span>
        <span class="n">verification_result</span><span class="p">[</span><span class="s1">&#39;recommendations&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_reproducibility_recommendations</span><span class="p">(</span>
            <span class="n">verification_result</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">verification_result</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_calculate_code_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code_files</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate hash of code files for version tracking&quot;&quot;&quot;</span>
        <span class="n">combined_content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">for</span> <span class="n">file_path</span> <span class="ow">in</span> <span class="n">code_files</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">combined_content</span> <span class="o">+=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
                <span class="n">combined_content</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;FILE_NOT_FOUND: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">(</span><span class="n">combined_content</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_reproduction_instructions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code_files</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
                                          <span class="n">data_description</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span>
                                          <span class="n">environment_info</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate step-by-step reproduction instructions&quot;&quot;&quot;</span>
        <span class="n">instructions</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;# Reproduction Instructions&quot;</span><span class="p">,</span>
            <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;## Environment Setup&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;1. Install Python version: </span><span class="si">{</span><span class="n">environment_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;python_version&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;See requirements&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s2">&quot;2. Install required packages:&quot;</span>
        <span class="p">]</span>

        <span class="n">packages</span> <span class="o">=</span> <span class="n">environment_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;packages&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">for</span> <span class="n">package</span><span class="p">,</span> <span class="n">version</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">instructions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - </span><span class="si">{</span><span class="n">package</span><span class="si">}</span><span class="s2">==</span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">instructions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
            <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;## Data Preparation&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;1. Obtain data from: </span><span class="si">{</span><span class="n">data_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;source&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;See documentation&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;2. Data version: </span><span class="si">{</span><span class="n">data_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Latest&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s2">&quot;3. Apply preprocessing steps:&quot;</span>
        <span class="p">])</span>

        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">data_description</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;preprocessing&#39;</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="n">instructions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - </span><span class="si">{</span><span class="n">step</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">instructions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
            <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;## Code Execution&quot;</span><span class="p">,</span>
            <span class="s2">&quot;1. Download code files:&quot;</span>
        <span class="p">])</span>

        <span class="k">for</span> <span class="n">file_path</span> <span class="ow">in</span> <span class="n">code_files</span><span class="p">:</span>
            <span class="n">instructions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   - </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">instructions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
            <span class="sa">f</span><span class="s2">&quot;2. Run main script: </span><span class="si">{</span><span class="n">code_files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">code_files</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;main.py&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s2">&quot;3. Set random seeds as specified in environment_info&quot;</span><span class="p">,</span>
            <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;## Expected Results&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Compare your results with the expected_results section in this package.&quot;</span>
        <span class="p">])</span>

        <span class="k">return</span> <span class="n">instructions</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_compare_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">reproduction</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> 
                        <span class="n">tolerances</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compare original and reproduction metrics&quot;&quot;&quot;</span>
        <span class="n">comparison</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;metric_comparisons&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;all_within_tolerance&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;some_within_tolerance&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="n">metric_name</span><span class="p">,</span> <span class="n">original_value</span> <span class="ow">in</span> <span class="n">original</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">metric_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">reproduction</span><span class="p">:</span>
                <span class="n">comparison</span><span class="p">[</span><span class="s1">&#39;metric_comparisons&#39;</span><span class="p">][</span><span class="n">metric_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;missing_in_reproduction&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;within_tolerance&#39;</span><span class="p">:</span> <span class="kc">False</span>
                <span class="p">}</span>
                <span class="n">comparison</span><span class="p">[</span><span class="s1">&#39;all_within_tolerance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">continue</span>

            <span class="n">reproduction_value</span> <span class="o">=</span> <span class="n">reproduction</span><span class="p">[</span><span class="n">metric_name</span><span class="p">]</span>
            <span class="n">tolerance</span> <span class="o">=</span> <span class="n">tolerances</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">metric_name</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>  <span class="c1"># Default 1% tolerance</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">original_value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">reproduction_value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="n">relative_diff</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">original_value</span> <span class="o">-</span> <span class="n">reproduction_value</span><span class="p">)</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="n">original_value</span><span class="p">)</span> <span class="k">if</span> <span class="n">original_value</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">abs</span><span class="p">(</span><span class="n">reproduction_value</span><span class="p">)</span>
                <span class="n">within_tolerance</span> <span class="o">=</span> <span class="n">relative_diff</span> <span class="o">&lt;=</span> <span class="n">tolerance</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">within_tolerance</span> <span class="o">=</span> <span class="n">original_value</span> <span class="o">==</span> <span class="n">reproduction_value</span>

            <span class="n">comparison</span><span class="p">[</span><span class="s1">&#39;metric_comparisons&#39;</span><span class="p">][</span><span class="n">metric_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;original_value&#39;</span><span class="p">:</span> <span class="n">original_value</span><span class="p">,</span>
                <span class="s1">&#39;reproduction_value&#39;</span><span class="p">:</span> <span class="n">reproduction_value</span><span class="p">,</span>
                <span class="s1">&#39;within_tolerance&#39;</span><span class="p">:</span> <span class="n">within_tolerance</span><span class="p">,</span>
                <span class="s1">&#39;tolerance_used&#39;</span><span class="p">:</span> <span class="n">tolerance</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="n">within_tolerance</span><span class="p">:</span>
                <span class="n">comparison</span><span class="p">[</span><span class="s1">&#39;some_within_tolerance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">comparison</span><span class="p">[</span><span class="s1">&#39;all_within_tolerance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="n">comparison</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_reproducibility_recommendations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verification_result</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate recommendations based on reproducibility verification&quot;&quot;&quot;</span>
        <span class="n">recommendations</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">status</span> <span class="o">=</span> <span class="n">verification_result</span><span class="p">[</span><span class="s1">&#39;overall_status&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;not_reproducible&#39;</span><span class="p">:</span>
            <span class="n">recommendations</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
                <span class="s2">&quot;Critical: Results not reproducible - investigate methodology&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Check environment setup and dependencies&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Verify data preprocessing steps&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Review random seed settings&quot;</span>
            <span class="p">])</span>
        <span class="k">elif</span> <span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;partially_reproducible&#39;</span><span class="p">:</span>
            <span class="n">recommendations</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
                <span class="s2">&quot;Some metrics not reproducible - investigate specific differences&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Consider adjusting tolerance levels if differences are minor&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Document known sources of variation&quot;</span>
            <span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Results successfully reproduced&quot;</span><span class="p">)</span>

        <span class="n">recommendations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Archive this reproduction package for future reference&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">recommendations</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_register_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">package</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register experiment version in registry&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">experiment_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">version_registry</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">version_registry</span><span class="p">[</span><span class="n">experiment_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">version_info</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">version_registry</span><span class="p">[</span><span class="n">experiment_id</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">package</span><span class="p">[</span><span class="s1">&#39;creation_date&#39;</span><span class="p">],</span>
            <span class="s1">&#39;code_hash&#39;</span><span class="p">:</span> <span class="n">package</span><span class="p">[</span><span class="s1">&#39;code_artifacts&#39;</span><span class="p">][</span><span class="s1">&#39;code_hash&#39;</span><span class="p">],</span>
            <span class="s1">&#39;data_hash&#39;</span><span class="p">:</span> <span class="n">package</span><span class="p">[</span><span class="s1">&#39;data_artifacts&#39;</span><span class="p">][</span><span class="s1">&#39;data_hash&#39;</span><span class="p">]</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">version_registry</span><span class="p">[</span><span class="n">experiment_id</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">version_info</span><span class="p">)</span>

<span class="c1"># Comprehensive demonstration function</span>
<span class="k">def</span><span class="w"> </span><span class="nf">demonstrate_transparency_accountability_tools</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Demonstrate transparency and accountability tools&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Transparency and Accountability Tools Demonstration ===</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># 1. Model Card Generation</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1. Model Card Generation:&quot;</span><span class="p">)</span>
    <span class="n">model_card_gen</span> <span class="o">=</span> <span class="n">ModelCardGenerator</span><span class="p">()</span>

    <span class="c1"># Sample model information</span>
    <span class="n">model_info</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Hiring Decision Classifier&#39;</span><span class="p">,</span>
        <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="s1">&#39;2.1&#39;</span><span class="p">,</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Binary Classification&#39;</span><span class="p">,</span>
        <span class="s1">&#39;architecture&#39;</span><span class="p">:</span> <span class="s1">&#39;Logistic Regression&#39;</span><span class="p">,</span>
        <span class="s1">&#39;intended_uses&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Resume screening&#39;</span><span class="p">,</span> <span class="s1">&#39;Initial candidate assessment&#39;</span><span class="p">],</span>
        <span class="s1">&#39;intended_users&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;HR departments&#39;</span><span class="p">,</span> <span class="s1">&#39;Recruitment agencies&#39;</span><span class="p">],</span>
        <span class="s1">&#39;out_of_scope&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Final hiring decisions&#39;</span><span class="p">,</span> <span class="s1">&#39;Salary determination&#39;</span><span class="p">]</span>
    <span class="p">}</span>

    <span class="n">training_data_info</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Historical Hiring Data 2020-2023&#39;</span><span class="p">,</span>
        <span class="s1">&#39;collection_method&#39;</span><span class="p">:</span> <span class="s1">&#39;Administrative records&#39;</span><span class="p">,</span>
        <span class="s1">&#39;demographic_factors&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;age_group&#39;</span><span class="p">,</span> <span class="s1">&#39;education_level&#39;</span><span class="p">],</span>
        <span class="s1">&#39;demographic_distribution&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;M&#39;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">:</span> <span class="mf">0.4</span><span class="p">}},</span>
        <span class="s1">&#39;bias_mitigation&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Reweighting&#39;</span><span class="p">,</span> <span class="s1">&#39;Fairness constraints&#39;</span><span class="p">]</span>
    <span class="p">}</span>

    <span class="n">evaluation_results</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;performance_metrics&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;accuracy&#39;</span><span class="p">:</span> <span class="mf">0.85</span><span class="p">,</span> <span class="s1">&#39;precision&#39;</span><span class="p">:</span> <span class="mf">0.82</span><span class="p">,</span> <span class="s1">&#39;recall&#39;</span><span class="p">:</span> <span class="mf">0.78</span><span class="p">}</span>
    <span class="p">}</span>

    <span class="n">bias_analysis</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;overall_severity&#39;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span>
        <span class="s1">&#39;affected_groups&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;female_candidates&#39;</span><span class="p">],</span>
        <span class="s1">&#39;mitigation_strategies&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Applied demographic parity constraints&#39;</span><span class="p">],</span>
        <span class="s1">&#39;analyzed_factors&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;age_group&#39;</span><span class="p">]</span>
    <span class="p">}</span>

    <span class="n">model_card</span> <span class="o">=</span> <span class="n">model_card_gen</span><span class="o">.</span><span class="n">create_model_card</span><span class="p">(</span>
        <span class="n">model_info</span><span class="p">,</span> <span class="n">training_data_info</span><span class="p">,</span> <span class="n">evaluation_results</span><span class="p">,</span> <span class="n">bias_analysis</span>
    <span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Model card created for: </span><span class="si">{</span><span class="n">model_card</span><span class="p">[</span><span class="s1">&#39;model_details&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Ethical considerations: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">model_card</span><span class="p">[</span><span class="s1">&#39;ethical_considerations&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2"> items&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Bias mitigation documented: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">training_data_info</span><span class="p">[</span><span class="s1">&#39;bias_mitigation&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2"> strategies&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>

    <span class="c1"># 2. Bias Documentation Framework</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;2. Bias Documentation Framework:&quot;</span><span class="p">)</span>
    <span class="n">doc_framework</span> <span class="o">=</span> <span class="n">BiasDocumentationFramework</span><span class="p">()</span>

    <span class="c1"># Document bias assessment</span>
    <span class="n">assessment_doc</span> <span class="o">=</span> <span class="n">doc_framework</span><span class="o">.</span><span class="n">document_bias_assessment</span><span class="p">(</span>
        <span class="s1">&#39;BIAS_ASSESS_001&#39;</span><span class="p">,</span>
        <span class="s1">&#39;demographic_parity_analysis&#39;</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="s1">&#39;approach&#39;</span><span class="p">:</span> <span class="s1">&#39;Statistical parity testing&#39;</span><span class="p">,</span>
            <span class="s1">&#39;tools&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;fairness_metrics_library&#39;</span><span class="p">],</span>
            <span class="s1">&#39;criteria&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;demographic_parity&#39;</span><span class="p">,</span> <span class="s1">&#39;equalized_odds&#39;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;summary&#39;</span><span class="p">:</span> <span class="s1">&#39;Moderate bias detected in gender predictions&#39;</span><span class="p">,</span>
            <span class="s1">&#39;severity&#39;</span><span class="p">:</span> <span class="s1">&#39;moderate&#39;</span><span class="p">,</span>
            <span class="s1">&#39;affected_groups&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;female_candidates&#39;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="p">[</span><span class="s1">&#39;Apply reweighting&#39;</span><span class="p">,</span> <span class="s1">&#39;Implement fairness constraints&#39;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Assessment documented: </span><span class="si">{</span><span class="n">assessment_doc</span><span class="p">[</span><span class="s1">&#39;assessment_id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Severity: </span><span class="si">{</span><span class="n">assessment_doc</span><span class="p">[</span><span class="s1">&#39;results&#39;</span><span class="p">][</span><span class="s1">&#39;severity_assessment&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Actions planned: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">assessment_doc</span><span class="p">[</span><span class="s1">&#39;decisions_and_actions&#39;</span><span class="p">][</span><span class="s1">&#39;immediate_decisions&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Generate compliance report</span>
    <span class="n">compliance_report</span> <span class="o">=</span> <span class="n">doc_framework</span><span class="o">.</span><span class="n">generate_compliance_report</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Compliance report generated - </span><span class="si">{</span><span class="n">compliance_report</span><span class="p">[</span><span class="s1">&#39;summary_statistics&#39;</span><span class="p">][</span><span class="s1">&#39;total_bias_assessments&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> assessments documented&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>

    <span class="c1"># 3. Reproducibility Checker</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;3. Reproducibility Checker:&quot;</span><span class="p">)</span>
    <span class="n">repro_checker</span> <span class="o">=</span> <span class="n">ReproducibilityChecker</span><span class="p">()</span>

    <span class="c1"># Create reproducibility package</span>
    <span class="n">repro_package</span> <span class="o">=</span> <span class="n">repro_checker</span><span class="o">.</span><span class="n">create_reproducibility_package</span><span class="p">(</span>
        <span class="s1">&#39;BIAS_EXPERIMENT_001&#39;</span><span class="p">,</span>
        <span class="p">[</span><span class="s1">&#39;bias_analysis.py&#39;</span><span class="p">,</span> <span class="s1">&#39;fairness_metrics.py&#39;</span><span class="p">],</span>
        <span class="p">{</span>
            <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Hiring dataset with demographic information&#39;</span><span class="p">,</span>
            <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="s1">&#39;company_hr_database&#39;</span><span class="p">,</span>
            <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="s1">&#39;2023_Q4&#39;</span><span class="p">,</span>
            <span class="s1">&#39;preprocessing&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Remove PII&#39;</span><span class="p">,</span> <span class="s1">&#39;Normalize scores&#39;</span><span class="p">,</span> <span class="s1">&#39;Handle missing values&#39;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;python_version&#39;</span><span class="p">:</span> <span class="s1">&#39;3.9.7&#39;</span><span class="p">,</span>
            <span class="s1">&#39;packages&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;scikit-learn&#39;</span><span class="p">:</span> <span class="s1">&#39;1.0.2&#39;</span><span class="p">,</span> <span class="s1">&#39;pandas&#39;</span><span class="p">:</span> <span class="s1">&#39;1.3.3&#39;</span><span class="p">,</span> <span class="s1">&#39;numpy&#39;</span><span class="p">:</span> <span class="s1">&#39;1.21.2&#39;</span><span class="p">},</span>
            <span class="s1">&#39;random_seeds&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;numpy&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span> <span class="s1">&#39;sklearn&#39;</span><span class="p">:</span> <span class="mi">123</span><span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;primary_metrics&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;demographic_parity_difference&#39;</span><span class="p">:</span> <span class="mf">0.12</span><span class="p">,</span> <span class="s1">&#39;accuracy&#39;</span><span class="p">:</span> <span class="mf">0.85</span><span class="p">},</span>
            <span class="s1">&#39;tolerance&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;demographic_parity_difference&#39;</span><span class="p">:</span> <span class="mf">0.02</span><span class="p">,</span> <span class="s1">&#39;accuracy&#39;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">}</span>
        <span class="p">}</span>
    <span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Reproducibility package created: </span><span class="si">{</span><span class="n">repro_package</span><span class="p">[</span><span class="s1">&#39;experiment_id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Code hash: </span><span class="si">{</span><span class="n">repro_package</span><span class="p">[</span><span class="s1">&#39;code_artifacts&#39;</span><span class="p">][</span><span class="s1">&#39;code_hash&#39;</span><span class="p">][:</span><span class="mi">8</span><span class="p">]</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Instructions generated: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">repro_package</span><span class="p">[</span><span class="s1">&#39;reproduction_instructions&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2"> steps&quot;</span><span class="p">)</span>

    <span class="c1"># Simulate verification</span>
    <span class="n">reproduction_results</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;primary_metrics&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;demographic_parity_difference&#39;</span><span class="p">:</span> <span class="mf">0.11</span><span class="p">,</span> <span class="s1">&#39;accuracy&#39;</span><span class="p">:</span> <span class="mf">0.84</span><span class="p">}</span>
    <span class="p">}</span>

    <span class="n">verification</span> <span class="o">=</span> <span class="n">repro_checker</span><span class="o">.</span><span class="n">verify_reproducibility</span><span class="p">(</span><span class="s1">&#39;BIAS_EXPERIMENT_001&#39;</span><span class="p">,</span> <span class="n">reproduction_results</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Verification status: </span><span class="si">{</span><span class="n">verification</span><span class="p">[</span><span class="s1">&#39;overall_status&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Recommendations: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">verification</span><span class="p">[</span><span class="s1">&#39;recommendations&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2"> items&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">demonstrate_transparency_accountability_tools</span><span class="p">()</span>
</code></pre>
</div>
<h2 id="practice-tasks">Practice Tasks<a class="headerlink" href="#practice-tasks" title="Permanent link">&para;</a></h2>
<h3 id="task-1-bias-source-analysis">Task 1: Bias Source Analysis<a class="headerlink" href="#task-1-bias-source-analysis" title="Permanent link">&para;</a></h3>
<p>Using the <code>BiasSourceAnalyzer</code> class, analyze a dataset of your choice for potential sampling, historical, labeler, and population drift biases. Create a comprehensive bias assessment report.</p>
<h3 id="task-2-missing-groups-investigation">Task 2: Missing Groups Investigation<a class="headerlink" href="#task-2-missing-groups-investigation" title="Permanent link">&para;</a></h3>
<p>Implement the missing groups detection framework on a real-world dataset. Set appropriate population benchmarks and develop a targeted sampling strategy to address identified gaps.</p>
<h3 id="task-3-fairness-aware-model-development">Task 3: Fairness-Aware Model Development<a class="headerlink" href="#task-3-fairness-aware-model-development" title="Permanent link">&para;</a></h3>
<p>Train two versions of a classification model: one standard version and one using bias mitigation techniques from the framework. Compare their fairness metrics and overall performance.</p>
<h3 id="task-4-model-card-creation">Task 4: Model Card Creation<a class="headerlink" href="#task-4-model-card-creation" title="Permanent link">&para;</a></h3>
<p>Create a comprehensive model card for an ML system you&rsquo;ve developed, including all bias analysis results, mitigation strategies, and ethical considerations.</p>
<h3 id="task-5-reproducibility-package">Task 5: Reproducibility Package<a class="headerlink" href="#task-5-reproducibility-package" title="Permanent link">&para;</a></h3>
<p>Develop a complete reproducibility package for a bias assessment experiment, including all code, data descriptions, environment specifications, and verification procedures.</p>
<h2 id="key-takeaways">Key Takeaways<a class="headerlink" href="#key-takeaways" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p><strong>Systematic Bias Detection</strong>: Bias in ML systems requires systematic detection across multiple dimensions including sampling, historical patterns, labeling processes, and population changes.</p>
</li>
<li>
<p><strong>Multi-faceted Mitigation</strong>: Effective bias mitigation requires combining diverse data collection, reweighting techniques, fairness-aware metrics, and continuous monitoring.</p>
</li>
<li>
<p><strong>Transparency is Essential</strong>: Model cards, comprehensive documentation, and reproducibility packages are crucial for accountability and trust in ML systems.</p>
</li>
<li>
<p><strong>Continuous Monitoring</strong>: Bias assessment is not a one-time activity but requires ongoing monitoring and adjustment as data and populations evolve.</p>
</li>
<li>
<p><strong>Stakeholder Involvement</strong>: Effective bias mitigation requires involvement from diverse stakeholders including affected communities, domain experts, and ethicists.</p>
</li>
</ol>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h2>
<p>This section provided comprehensive frameworks for investigating and mitigating bias in ML and AI systems. We covered:</p>
<ul>
<li>
<p><strong>Sources of Bias Analysis</strong>: Systematic detection of sampling bias, historical bias, labeler bias, and population drift</p>
</li>
<li>
<p><strong>Practical Investigation Tools</strong>: Dataset provenance analysis, missing groups detection, and measurement bias assessment  </p>
</li>
<li>
<p><strong>Mitigation Strategies</strong>: Diverse data collection, reweighting techniques, and fairness-aware metrics</p>
</li>
<li>
<p><strong>Transparency and Accountability</strong>: Model cards, documentation frameworks, and reproducibility checks</p>
</li>
</ul>
<p>The frameworks and tools presented enable practitioners to systematically identify, analyze, and address bias throughout the ML development lifecycle, ensuring more fair and reliable AI systems.</p>
<hr />
<p><em>Next: Continue to quiz assessment for comprehensive evaluation of bias investigation concepts.</em></p>
<p>Now let me complete the section with mitigation strategies and transparency tools.</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="October 16, 2025 05:58:30 UTC">October 16, 2025</span>
  </span>

    
    
    
    
  </aside>


  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              
              
                
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              
              
                
                
              
              Thanks for your feedback! Help us improve this page by creating an <a href="https://github.com/Eatham532/Software-Engineering-HSC-Textbook/issues/new/choose" target="_blank" rel="noopener">issue</a> on github.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        

<!-- Footer -->
<footer class="md-footer">
  
    <!-- Custom footer with left/right layout -->
    <div class="md-footer__inner md-grid">
      <!-- Left side: Copyright and cookie settings -->
      <div class="md-footer__left">
        <div class="md-footer__copyright">
          
            Copyright &copy; 2025 Eatham532 â€“ <a href="#__consent">Change cookie settings</a>

          
        </div>
      </div>

      <!-- Right side: Page name and BETA -->
      <div class="md-footer__right">
        <div class="md-footer__page-info">
          <span class="md-footer__page-title">Content</span>
          
            <span class="md-footer__beta-badge">BETA</span>
          
        </div>
      </div>
    </div>
  
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            



<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of the textbook. With your consent, you're helping us to make software engineering education better for everyone.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="analytics" checked>
      <span class="task-list-indicator"></span>
      Google Analytics
    </label>
  </li>

      
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "navigation.top", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.prune", "search.highlight", "search.suggest", "content.code.annotate", "content.code.copy", "content.code.select", "content.tabs.link", "content.action.edit", "content.action.view", "toc.follow"], "search": "../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../../../assets/diagram-modal.js"></script>
      
        <script src="../../../../assets/quiz.js"></script>
      
        <script src="../../../../assets/ide-utils.js"></script>
      
        <script src="../../../../assets/code-blocks.js"></script>
      
    
  </body>
</html>